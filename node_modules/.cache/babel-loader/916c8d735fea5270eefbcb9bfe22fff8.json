{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, createCommentVNode as _createCommentVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-f2ff73ea\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"border-bottom d-flex justify-content-between\"\n};\nconst _hoisted_3 = {\n  class: \"fw-normal\",\n  style: {\n    \"font-size\": \"20px\"\n  }\n};\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"pb-2 mt-3\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"Client\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_5 = {\n  class: \"input-group pb-3 border-bottom\"\n};\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = {\n  class: \"d-flex border-bottom pb-3 pt-3 row\"\n};\nconst _hoisted_8 = {\n  class: \"w-50 col-lg\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\",\n  for: \"inputDesctiption\"\n}, \"Commentaires\", -1\n/* HOISTED */\n));\n\nconst _hoisted_10 = {\n  class: \"w-50 col-lg\"\n};\nconst _hoisted_11 = {\n  class: \"pb-2\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\"\n}, \"Date limite de réglement \", -1\n/* HOISTED */\n));\n\nconst _hoisted_13 = {\n  class: \"table\"\n};\nconst _hoisted_14 = {\n  class: \"col-xl-4\",\n  id: \"devismainblock\"\n};\n\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Description\", -1\n/* HOISTED */\n));\n\nconst _hoisted_16 = [\"onUpdate:modelValue\"];\nconst _hoisted_17 = {\n  class: \"col\"\n};\n\nconst _hoisted_18 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Date\", -1\n/* HOISTED */\n));\n\nconst _hoisted_19 = [\"onUpdate:modelValue\"];\nconst _hoisted_20 = {\n  class: \"col\"\n};\n\nconst _hoisted_21 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Quantité\", -1\n/* HOISTED */\n));\n\nconst _hoisted_22 = [\"onUpdate:modelValue\"];\nconst _hoisted_23 = {\n  class: \"col\"\n};\n\nconst _hoisted_24 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Unité\", -1\n/* HOISTED */\n));\n\nconst _hoisted_25 = [\"onUpdate:modelValue\"];\n\nconst _hoisted_26 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"PIECE\\\" data-v-f2ff73ea>Piéce(s)</option><option value=\\\"HEURE\\\" data-v-f2ff73ea>Heures</option><option value=\\\"KM\\\" data-v-f2ff73ea>Km</option><option value=\\\"KG\\\" data-v-f2ff73ea>Kg</option><option value=\\\"M\\\" data-v-f2ff73ea>M</option><option value=\\\"LOT_PARC\\\" data-v-f2ff73ea>Lot Parc</option><option value=\\\"AM\\\" data-v-f2ff73ea>Am</option>\", 7);\n\nconst _hoisted_33 = [_hoisted_26];\nconst _hoisted_34 = {\n  class: \"col\"\n};\n\nconst _hoisted_35 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Prix(€)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_36 = [\"onUpdate:modelValue\"];\nconst _hoisted_37 = {\n  class: \"col\"\n};\n\nconst _hoisted_38 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"TVA(%)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_39 = [\"onUpdate:modelValue\"];\nconst _hoisted_40 = {\n  class: \"col\"\n};\n\nconst _hoisted_41 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Montant(€)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_42 = [\"value\"];\nconst _hoisted_43 = {\n  class: \"mx-auto d-flex justify-content-between\"\n};\n\nconst _hoisted_44 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"mt-3 me-2\"\n}, \"Total HT\", -1\n/* HOISTED */\n));\n\nconst _hoisted_45 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"€ \", -1\n/* HOISTED */\n));\n\nconst _hoisted_46 = [\"value\"];\n\nconst _hoisted_47 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"mt-3 me-2\"\n}, \"Total TVA\", -1\n/* HOISTED */\n));\n\nconst _hoisted_48 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"€ \", -1\n/* HOISTED */\n));\n\nconst _hoisted_49 = [\"value\"];\n\nconst _hoisted_50 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"mt-3 me-2\"\n}, \"Total TTC\", -1\n/* HOISTED */\n));\n\nconst _hoisted_51 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"€ \", -1\n/* HOISTED */\n));\n\nconst _hoisted_52 = [\"value\"];\nconst _hoisted_53 = {\n  id: \"notify\",\n  class: \"text-danger\"\n};\nconst _hoisted_54 = {\n  class: \"d-flex justify-content-center m-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AddClientBlock = _resolveComponent(\"AddClientBlock\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_AddClientBlock, {\n    onAccept: _ctx.getForm,\n    revele: _ctx.revele,\n    toggleModale: $options.toggleModale\n  }, null, 8\n  /* PROPS */\n  , [\"onAccept\", \"revele\", \"toggleModale\"]), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"span\", _hoisted_3, \"Modifier \\\"\" + _toDisplayString(_ctx.$store.state.EditFacture.reference) + \"\\\"\", 1\n  /* TEXT */\n  ), _createElementVNode(\"button\", {\n    class: \"btn mb-1 btn-danger\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.go(-1))\n  }, \"Retour\")]), _hoisted_4, _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n    class: \"btn-hkos\",\n    onClick: _cache[1] || (_cache[1] = $event => _ctx.$store.dispatch('toggleModal', {\n      status: true,\n      event: $event.target\n    })),\n    id: \"open-modal\"\n  }, \" Nouveau client + \"), _withDirectives(_createElementVNode(\"select\", {\n    class: \"form-control\",\n    style: {\n      \"font-weight\": \"300\"\n    },\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.$store.state.EditFacture.clientUuid = $event),\n    type: \"\"\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.getClients, client => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      value: client.uuid,\n      key: client\n    }, _toDisplayString(client.nom) + \" \" + _toDisplayString(client.prenoms), 9\n    /* TEXT, PROPS */\n    , _hoisted_6);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))], 512\n  /* NEED_PATCH */\n  ), [[_vModelSelect, _ctx.$store.state.EditFacture.clientUuid]])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", null, [_hoisted_9, _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"form-control\",\n    rows: \"4\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.$store.state.EditFacture.commentaires = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.$store.state.EditFacture.commentaires]])])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _withDirectives(_createElementVNode(\"input\", {\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => _ctx.$store.state.EditFacture.dateReglement = $event),\n    type: \"date\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.$store.state.EditFacture.dateReglement]])])])]), _createElementVNode(\"div\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.$store.state.EditFacture.lines, row => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"t-row row mt-2\",\n      id: \"devismainblock\",\n      key: row\n    }, [_createElementVNode(\"div\", _hoisted_14, [_hoisted_15, _withDirectives(_createElementVNode(\"input\", {\n      class: \"form-control\",\n      \"onUpdate:modelValue\": $event => row.productName = $event,\n      type: \"text\",\n      placeholder: \"Description\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_16), [[_vModelText, row.productName]])]), _createElementVNode(\"div\", _hoisted_17, [_hoisted_18, _withDirectives(_createElementVNode(\"input\", {\n      class: \"form-control\",\n      \"onUpdate:modelValue\": $event => row.date = $event,\n      type: \"date\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_19), [[_vModelText, row.date]])]), _createElementVNode(\"div\", _hoisted_20, [_hoisted_21, _withDirectives(_createElementVNode(\"input\", {\n      id: \"qty\",\n      class: \"form-control calc-inp maclasse\",\n      placeholder: \"Quantité\",\n      \"onUpdate:modelValue\": $event => row.quantity = $event,\n      onKeydown: _cache[5] || (_cache[5] = (...args) => $options.format && $options.format(...args)),\n      type: \"number\",\n      step: \"0.5\"\n    }, null, 40\n    /* PROPS, HYDRATE_EVENTS */\n    , _hoisted_22), [[_vModelText, row.quantity]])]), _createElementVNode(\"div\", _hoisted_23, [_hoisted_24, _withDirectives(_createElementVNode(\"select\", {\n      id: \"unit\",\n      class: \"form-control\",\n      type: \"\",\n      \"onUpdate:modelValue\": $event => row.units = $event\n    }, _hoisted_33, 8\n    /* PROPS */\n    , _hoisted_25), [[_vModelSelect, row.units]])]), _createElementVNode(\"div\", _hoisted_34, [_hoisted_35, _withDirectives(_createElementVNode(\"input\", {\n      id: \"price\",\n      class: \"form-control calc-inp\",\n      type: \"number\",\n      placeholder: \"Prix\",\n      \"onUpdate:modelValue\": $event => row.htPrice = $event\n    }, null, 8\n    /* PROPS */\n    , _hoisted_36), [[_vModelText, row.htPrice]])]), _createElementVNode(\"div\", _hoisted_37, [_hoisted_38, _withDirectives(_createElementVNode(\"input\", {\n      id: \"tax\",\n      class: \"form-control calc-inp\",\n      type: \"number\",\n      \"onUpdate:modelValue\": $event => row.tvaPercent = $event,\n      onKeydown: _cache[6] || (_cache[6] = (...args) => $options.format && $options.format(...args)),\n      placeholder: \"TVA(%)\",\n      step: \"0.1\"\n    }, null, 40\n    /* PROPS, HYDRATE_EVENTS */\n    , _hoisted_39), [[_vModelText, row.tvaPercent]])]), _createElementVNode(\"div\", _hoisted_40, [_hoisted_41, _createElementVNode(\"input\", {\n      class: \"form-control\",\n      type: \"points\",\n      value: (row.finalPrice = row.quantity * row.htPrice * (1 + row.tvaPercent / 100)).toFixed(2),\n      placeholder: \"0.00\",\n      step: \"0.1\",\n      readonly: \"readonly\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_42)])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), _createCommentVNode(\" Lines \"), _createElementVNode(\"div\", _hoisted_43, [_createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"btn btn-light border mt-3\",\n    id: \"addbutton\",\n    type: \"button\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.addRow && $options.addRow(...args))\n  }, \" Ajouter + \")]), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.removeLast && $options.removeLast(...args)),\n    class: \"btn btn-light border mt-3\"\n  }, \" Supprimer - \")])]), _createElementVNode(\"div\", null, [_hoisted_44, _hoisted_45, _createElementVNode(\"input\", {\n    style: {\n      \"border\": \"none\"\n    },\n    type: \"number\",\n    placeholder: \"0.00\",\n    readonly: \"readonly\",\n    value: $options.getTotal().totalHT.toFixed(2)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_46)]), _createElementVNode(\"div\", null, [_hoisted_47, _hoisted_48, _createElementVNode(\"input\", {\n    style: {\n      \"border\": \"none\"\n    },\n    type: \"number\",\n    placeholder: \"0.00\",\n    readonly: \"readonly\",\n    value: $options.getTotal().totalTVA.toFixed(2)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_49)]), _createElementVNode(\"div\", null, [_hoisted_50, _hoisted_51, _createElementVNode(\"input\", {\n    id: \"amount\",\n    style: {\n      \"border\": \"none\"\n    },\n    type: \"number\",\n    placeholder: \"0.00\",\n    readonly: \"readonly\",\n    value: $options.getTotal().totalTTC.toFixed(2)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_52)])]), _createElementVNode(\"div\", _hoisted_53, _toDisplayString($data.err), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", _hoisted_54, [_createElementVNode(\"button\", {\n    class: \"btn-hkos\",\n    onClick: _cache[9] || (_cache[9] = (...args) => $options.sendForm && $options.sendForm(...args))\n  }, \"Modifier ma facture\")])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","style","_createElementVNode","for","id","_hoisted_26","_createVNode","_component_AddClientBlock","onAccept","_ctx","revele","toggleModale","$options","_toDisplayString","state","EditFacture","reference","onClick","go","_hoisted_4","dispatch","status","event","$event","target","clientUuid","type","_createElementBlock","_Fragment","_renderList","client","value","uuid","key","nom","prenoms","_hoisted_6","_hoisted_9","rows","commentaires","_hoisted_12","dateReglement","lines","row","_hoisted_15","productName","placeholder","_hoisted_18","date","_hoisted_21","quantity","onKeydown","step","_hoisted_24","units","_hoisted_35","htPrice","_hoisted_38","tvaPercent","_hoisted_41","finalPrice","toFixed","readonly","_createCommentVNode","_hoisted_44","_hoisted_45","totalHT","_hoisted_47","_hoisted_48","totalTVA","_hoisted_50","_hoisted_51","totalTTC","$data"],"sourceRoot":"","sources":["/Users/feyraf/Desktop/projet Hkos/hkos-project-front/src/components/user/Facture/EditFacture.vue"],"sourcesContent":["<template>\n  <AddClientBlock\n    @accept=\"getForm\"\n    v-bind:revele=\"revele\"\n    v-bind:toggleModale=\"toggleModale\"\n  />\n\n  <div class=\"container\">\n    <div class=\"border-bottom d-flex justify-content-between\">\n      <span class=\"fw-normal\" style=\"font-size: 20px\">Modifier \"{{$store.state.EditFacture.reference}}\"</span>\n      <button class=\"btn mb-1 btn-danger\" @click=\"$router.go(-1)\">Retour</button>\n    </div>\n\n    <div class=\"pb-2 mt-3\"><span>Client</span></div>\n\n    <div class=\"input-group pb-3 border-bottom\">\n      <button\n        class=\"btn-hkos\"\n        v-on:click=\"\n          $store.dispatch('toggleModal', { status: true, event: $event.target })\n        \"\n        id=\"open-modal\"\n      >\n        Nouveau client +\n      </button>\n      <select\n        class=\"form-control\"\n        style=\"font-weight: 300\"\n        v-model=\"$store.state.EditFacture.clientUuid\"\n        type=\"\"\n      >\n        <option :value=\"client.uuid\" v-for=\"client in getClients\" :key=\"client\">\n          {{ client.nom }} {{ client.prenoms }}\n        </option>\n      </select>\n    </div>\n\n    <div class=\"d-flex border-bottom pb-3 pt-3 row\">\n      <div class=\"w-50 col-lg\">\n        <div>\n          <label class=\"form-label\" for=\"inputDesctiption\">Commentaires</label>\n          <textarea\n            class=\"form-control\"\n            rows=\"4\"\n            v-model=\"$store.state.EditFacture.commentaires\"\n          ></textarea>\n        </div>\n      </div>\n      <div class=\"w-50 col-lg\">\n        <div class=\"pb-2\">\n          <label class=\"form-label\">Date limite de réglement </label>\n          <input\n            class=\"form-control\"\n            v-model=\"$store.state.EditFacture.dateReglement\"\n            type=\"date\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <div class=\"table\">\n      <div\n        class=\"t-row row mt-2\"\n        id=\"devismainblock\"\n        v-for=\"row in $store.state.EditFacture.lines\"\n        :key=\"row\"\n      >\n        <div class=\"col-xl-4\" id=\"devismainblock\">\n          <label class=\"\">Description</label>\n          <input\n            class=\"form-control\"\n            v-model=\"row.productName\"\n            type=\"text\"\n            placeholder=\"Description\"\n          />\n        </div>\n        <div class=\"col\">\n          <label class=\"\">Date</label>\n          <input class=\"form-control\" v-model=\"row.date\" type=\"date\" />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Quantité</label>\n          <input\n            id=\"qty\"\n            class=\"form-control calc-inp maclasse\"\n            placeholder=\"Quantité\"\n            v-model=\"row.quantity\"\n            @keydown=\"format\"\n            type=\"number\"\n            step=\"0.5\"\n          />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Unité</label>\n          <select id=\"unit\" class=\"form-control\" type=\"\" v-model=\"row.units\">\n            <option value=\"PIECE\">Piéce(s)</option>\n            <option value=\"HEURE\">Heures</option>\n            <option value=\"KM\">Km</option>\n            <option value=\"KG\">Kg</option>\n            <option value=\"M\">M</option>\n            <option value=\"LOT_PARC\">Lot Parc</option>\n            <option value=\"AM\">Am</option>\n          </select>\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Prix(€)</label>\n          <input\n            id=\"price\"\n            class=\"form-control calc-inp\"\n            type=\"number\"\n            placeholder=\"Prix\"\n            v-model=\"row.htPrice\"\n          />\n        </div>\n        <div class=\"col\">\n          <label class=\"\">TVA(%)</label>\n          <input\n            id=\"tax\"\n            class=\"form-control calc-inp\"\n            type=\"number\"\n            v-model=\"row.tvaPercent\"\n            @keydown=\"format\"\n            placeholder=\"TVA(%)\"\n            step=\"0.1\"\n          />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Montant(€)</label>\n          <input\n            class=\"form-control\"\n            type=\"points\"\n            :value=\"\n              (row.finalPrice =\n                row.quantity *\n                row.htPrice *\n                (1 + row.tvaPercent / 100)).toFixed(2)\n            \"\n            placeholder=\"0.00\"\n            step=\"0.1\"\n            readonly=\"readonly\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <!-- Lines -->\n\n    <div class=\"mx-auto d-flex justify-content-between\">\n      <div>\n        <button\n          class=\"btn btn-light border mt-3\"\n          id=\"addbutton\"\n          type=\"button\"\n          @click=\"addRow\"\n        >\n          Ajouter +\n        </button>\n      </div>\n\n      <div>\n        <button @click=\"removeLast\" class=\"btn btn-light border mt-3\">\n          Supprimer -\n        </button>\n      </div>\n    </div>\n\n    <div>\n      <label class=\"mt-3 me-2\">Total HT</label>\n      <span>€ </span>\n      <input\n        style=\"border: none\"\n        type=\"number\"\n        placeholder=\"0.00\"\n        readonly=\"readonly\"\n        :value=\"getTotal().totalHT.toFixed(2)\"\n      />\n    </div>\n\n    <div>\n      <label class=\"mt-3 me-2\">Total TVA</label>\n      <span>€ </span>\n      <input\n        style=\"border: none\"\n        type=\"number\"\n        placeholder=\"0.00\"\n        readonly=\"readonly\"\n        :value=\"getTotal().totalTVA.toFixed(2)\"\n      />\n    </div>\n\n    <div>\n      <label class=\"mt-3 me-2\">Total TTC</label>\n      <span>€ </span>\n      <input\n        id=\"amount\"\n        style=\"border: none\"\n        type=\"number\"\n        placeholder=\"0.00\"\n        readonly=\"readonly\"\n        :value=\"getTotal().totalTTC.toFixed(2)\"\n      />\n    </div>\n  </div>\n\n  <div id=\"notify\" class=\"text-danger\">{{ err }}</div>\n\n  <div class=\"d-flex justify-content-center m-4\">\n\n    <button class=\"btn-hkos\" @click=\"sendForm\">Modifier ma facture</button>\n  </div>\n</template>\n\n<script>\nimport AddClientBlock from \"../AddClientBlock.vue\";\n\nclass lines {\n  productName = \"\";\n  date = \"\";\n  units = \"\";\n  quantity = \"\";\n  htPrice = \"\";\n  tvaPercent = \"\";\n  finalPrice = \"\";\n}\n\nexport default {\n  name: \"EditFacture\",\n  props: {\n    msg: String,\n  },\n\n  data() {\n    return {\n      err: \"\",\n    };\n  },\n  methods: {\n    format(e) {\n      var key = e.key;\n      if (\n        !/^\\d+/g.test(key) &&\n        key != \"Backspace\" &&\n        key != \"Delete\" &&\n        key != \"ArrowLeft\" &&\n        key != \"ArrowRight\"\n      ) {\n        e.preventDefault();\n      }\n    },\n    addRow() {\n      this.$store.state.EditFacture.lines.push(new lines());\n    },\n    async sendForm() {\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/facture/update/`, {\n        method: \"post\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(this.$store.state.EditFacture),\n      });\n\n      let data = await res.json();\n      if (data.message == \"Facture Updated\") {\n        this.$router.push(\"/Facture\");\n      } else {\n        this.err = data.error.message;\n      }\n    },\n\n    removeLast() {\n      if (this.$store.state.EditFacture.lines.length > 1) {\n        this.$store.state.EditFacture.lines.pop();\n      }\n    },\n\n    toggleModale: function (e) {\n      if (e) {\n        if (!e.target.closest(\".modale\") || e.target.id == \"close-btn\")\n          this.revele = false;\n      } else this.revele = false;\n    },\n\n    getTotal() {\n      const Result = {\n        totalHT: 0,\n        totalTTC: 0,\n        totalTVA: 0,\n      };\n      if (this.$store.state.EditFacture.lines) {\n        this.$store.state.EditFacture.lines.forEach((elem) => {\n          Result.totalHT += elem.htPrice * elem.quantity;\n          Result.totalTTC += elem.finalPrice;\n          Result.totalTVA += elem.finalPrice - elem.htPrice * elem.quantity;\n        });\n      }\n      this.$store.state.EditFacture.totalHT = Result.totalHT.toFixed(2);\n      this.$store.state.EditFacture.totalTTC = Result.totalTTC.toFixed(2);\n      this.$store.state.EditFacture.totalTVA = Result.totalTVA.toFixed(2);\n\n      return Result;\n    },\n\n    getDate() {\n      let Result = \"\";\n      if (this.$store.state.EditFacture.dateReglement) {\n        Result = this.$store.state.EditFacture.dateReglement.substring(\n          0,\n          this.$store.state.EditFacture.dateReglement.length - 14\n        );\n      }\n      this.$store.state.EditFacture.totalTVA == Result;\n      return Result;\n    },\n  },\n  mounted() {\n    this.$store.dispatch(\"getFacture\", { uuid: this.$route.params.uuid });\n    this.$store.dispatch(\"getClients\");\n  },\n  updated() {},\n\n  computed: {\n    getClients() {\n      return this.$store.state.Clients;\n    },\n  },\n  components: {\n    AddClientBlock,\n  },\n};\n</script>\n\n<style scoped>\n* {\n  font-size: 14px;\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module"}