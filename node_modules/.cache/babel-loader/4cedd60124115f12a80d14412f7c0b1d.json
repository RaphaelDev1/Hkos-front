{"ast":null,"code":"export default {\n  name: \"DevisInfo\",\n  props: [],\n\n  data() {\n    return {};\n  },\n\n  methods: {\n    async Statut(status) {\n      this.$store.state.item.status = status;\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/devis/update/`, {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(this.$store.state.item)\n      });\n      let data = await res.json();\n\n      if (data.message) {\n        console.log(data.message);\n        this.$router.go(\"Devis\");\n      }\n    },\n\n    Download() {\n      window.location = `https://hkos-back.herokuapp.com/devis/download/${this.$store.state.item.uuid}`;\n    },\n\n    getDate(value) {\n      return new Date(Date.parse(value)).toLocaleString();\n    },\n\n    getStatus(value, type) {\n      let color;\n\n      if (value == \"DRAFT\") {\n        let res = \"Brouillon\";\n        value = res;\n        color = \"rgba(255, 151, 87, 0.3)\";\n      } else if (value == \"CREATED\") {\n        let res = \"Créé\";\n        value = res;\n        color = \"rgba(102, 228, 240, 0.5)\";\n      } else if (value == \"PAYED\") {\n        let res = \"Facturé\";\n        value = res;\n        color = \"rgba(87, 255, 112, 0.5)\";\n      } else if (value == \"CANCELLED\") {\n        let res = \"Annulé\";\n        value = res;\n        color = \"rgba(255, 87, 90, 0.6)\";\n      }\n\n      return type == \"text\" ? value : color;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAsJA,eAAe;EACbA,IAAI,EAAE,WADO;EAEbC,KAAK,EAAE,EAFM;;EAGbC,IAAI,GAAG;IACL,OAAO,EAAP;EACD,CALY;;EAMbC,OAAO,EAAE;IACP,MAAMC,MAAN,CAAaC,MAAb,EAAqB;MACnB,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,IAAlB,CAAuBH,MAAvB,GAAgCA,MAAhC;MAEA,IAAII,GAAE,GAAI,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,gBAAiB,gBAAjC,EAAkD;QACrEC,MAAM,EAAE,MAD6D;QAErEC,OAAO,EAAE;UAAE,gBAAgB;QAAlB,CAF4D;QAGrEC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAKZ,MAAL,CAAYC,KAAZ,CAAkBC,IAAjC;MAH+D,CAAlD,CAArB;MAKA,IAAIN,IAAG,GAAI,MAAMO,GAAG,CAACU,IAAJ,EAAjB;;MACA,IAAGjB,IAAI,CAACkB,OAAR,EAAgB;QACdC,OAAO,CAACC,GAAR,CAAYpB,IAAI,CAACkB,OAAjB;QACA,KAAKG,OAAL,CAAaC,EAAb,CAAgB,OAAhB;MACF;IACD,CAdM;;IAgBPC,QAAQ,GAAG;MACTC,MAAM,CAACC,QAAP,GAAmB,kDAAiD,KAAKrB,MAAL,CAAYC,KAAZ,CAAkBC,IAAlB,CAAuBoB,IAAK,EAAhG;IACD,CAlBM;;IAmBPC,OAAO,CAACC,KAAD,EAAQ;MACb,OAAO,IAAIC,IAAJ,CAASA,IAAI,CAACC,KAAL,CAAWF,KAAX,CAAT,EAA4BG,cAA5B,EAAP;IACD,CArBM;;IAuBVC,SAAS,CAACJ,KAAD,EAAQK,IAAR,EAAc;MAClB,IAAIC,KAAJ;;MACA,IAAIN,KAAI,IAAK,OAAb,EAAsB;QACpB,IAAIrB,GAAE,GAAI,WAAV;QACAqB,KAAI,GAAIrB,GAAR;QACA2B,KAAI,GAAI,yBAAR;MACF,CAJA,MAIO,IAAIN,KAAI,IAAK,SAAb,EAAwB;QAC7B,IAAIrB,GAAE,GAAI,MAAV;QACAqB,KAAI,GAAIrB,GAAR;QACA2B,KAAI,GAAI,0BAAR;MACF,CAJO,MAIA,IAAIN,KAAI,IAAK,OAAb,EAAsB;QAC3B,IAAIrB,GAAE,GAAI,SAAV;QACAqB,KAAI,GAAIrB,GAAR;QACA2B,KAAI,GAAI,yBAAR;MACF,CAJO,MAIA,IAAIN,KAAI,IAAK,WAAb,EAA0B;QAC/B,IAAIrB,GAAE,GAAI,QAAV;QACAqB,KAAI,GAAIrB,GAAR;QACA2B,KAAI,GAAI,wBAAR;MACF;;MACA,OAAOD,IAAG,IAAK,MAAR,GAAiBL,KAAjB,GAAyBM,KAAhC;IACD;;EA3CM;AANI,CAAf","names":["name","props","data","methods","Statut","status","$store","state","item","res","fetch","process","env","VUE_APP_ROOT_API","method","headers","body","JSON","stringify","json","message","console","log","$router","go","Download","window","location","uuid","getDate","value","Date","parse","toLocaleString","getStatus","type","color"],"sourceRoot":"","sources":["/Users/feyraf/Desktop/projet Hkos/hkos-project-front/src/components/user/Devis/DevisInfo.vue"],"sourcesContent":["\n<template>\n  <div\n    class=\"overlay\"\n    v-if=\"$store.state.revele\"\n    v-on:click=\"$store.dispatch('toggleModal', { target: $event.target })\"\n  >\n    <div class=\"modale\">\n      <div class=\"container\">\n        <div class=\"pt-3 pb-3 border-bottom\">\n          <div class=\"d-flex justify-content-end\">\n            <button class=\"btn me-2 color-white\" id=\"close-btn\">X</button>\n          </div>\n          <h3 class=\"m-auto\" style=\"font-weight: 300; text-align: center\">\n            Devis № {{ $store.state.item.reference }}\n          </h3>\n          <div class=\"w-25 m-auto\" ><h3 class=\" mt-3 text-center\" :style=\"{ background: getStatus($store.state.item.status, 'color') }\" >\n             {{ getStatus($store.state.item.status, \"text\") }}\n          </h3></div>\n        </div>\n\n        <div class=\"pb-5 mt-3 row m-auto\">\n          <div class=\"col-lg\">\n            <!-- left -->\n\n            <div class=\"pb-2 d-flex justify-content-between\">\n              <div class=\"\">\n                <a\n                  class=\"btn\"\n                  style=\"background-color: rgb(27, 179, 27); color: white\"\n                  href=\"mailto:\"\n                >\n                  Envoyer\n                </a>\n              </div>\n              <div class=\"\">\n                <button\n                  class=\"btn dropdown-toggle btn-outline-secondary\"\n                  type=\"button\"\n                  data-bs-toggle=\"dropdown\"\n                  aria-expanded=\"false\"\n                >\n                  Options\n                </button>\n                <ul class=\"dropdown-menu\">\n                  <li>\n                    <a class=\"dropdown-item\" @click=\"Download\">Télécharger</a>\n                  </li>\n                  <li>\n                    <router-link\n                      class=\"dropdown-item\"\n                      id=\"close-btn\"\n                      :to=\"`/edit-devis/${$store.state.item.uuid}`\"\n                      >Modifier</router-link\n                    >\n                  </li>\n                  <li>\n                    <a class=\"dropdown-item\" href=\"#\">Dupliquer</a>\n                  </li>\n                  <li>\n                    <button class=\"dropdown-item\" href=\"#\">Supprimer</button>\n                  </li>\n                </ul>\n              </div>\n\n              <div class=\"dropdown\">\n                <button\n                  class=\"btn dropdown-toggle btn-outline-secondary\"\n                  type=\"button\"\n                  data-bs-toggle=\"dropdown\"\n                  aria-expanded=\"false\"\n                >\n                  Statut\n                </button>\n                <button class=\"dropdown-menu\">\n                  <a  class=\"dropdown-item\" @click=\"Statut('DRAFT')\"\n                    >Brouillon</a\n                  >\n                  <a class=\"dropdown-item\" @click=\"Statut('CREATED')\">Créé</a>\n\n                  <a  class=\"dropdown-item\" @click=\"Statut('PAYED')\"\n                    >Facturé</a\n                  >\n\n                  <a class=\"dropdown-item\" @click=\"Statut('CANCELLED')\" >Annulé</a>\n                </button>\n              </div>\n            </div>\n\n            <div class=\"mt-3 pt-2 pb-2 bg-light\">\n              <div class=\"ps-3\">\n                {{ $store.state.item.clients[0].nom }}\n                {{ $store.state.item.clients[0].prenoms }}\n              </div>\n              <div class=\"ps-3\">{{ $store.state.item.clients[0].adresse }}</div>\n              <div class=\"ps-3\">\n                {{ $store.state.item.clients[0].codePostal }}\n              </div>\n              <div class=\"ps-3\">{{ $store.state.item.clients[0].pays }}</div>\n            </div>\n\n            <div class=\"mt-3 pb-3 border-bottom\">\n              <div>Commentaires :{{ $store.state.item.commentaires }}</div>\n            </div>\n\n            <div class=\"mt-3 d-flex justify-content-between\">\n              <span style=\"font-weight: 300\">Total HT</span>\n              <span style=\"font-weight: 300\"\n                >{{ $store.state.item.totalHT }} €\n              </span>\n            </div>\n\n            <div class=\"mt-3 d-flex justify-content-between\">\n              <span style=\"font-weight: 300\">TVA</span>\n              <span style=\"font-weight: 300\"\n                >{{ $store.state.item.totalTVA }} €</span\n              >\n            </div>\n\n            <div class=\"mt-3 pb-3 border-bottom d-flex justify-content-between\">\n              <span style=\"font-weight: 300\">Total TTC</span>\n              <span style=\"font-weight: 300\"\n                >{{ $store.state.item.totalTTC }} €</span\n              >\n            </div>\n\n            <div class=\"mt-4 pt-2 pb-2 bg-light\">\n              <div class=\"ps-3\" style=\"font-weight: 300\">Historique</div>\n              <div class=\"ps-3 mt-3 d-flex justify-content-between\">\n                <span>• Créé</span>\n                <span class=\"pe-2\" style=\"color: grey\">{{\n                  getDate($store.state.item.createdAt)\n                }}</span>\n              </div>\n\n                            <div class=\"ps-3 mt-3 d-flex justify-content-between\">\n                <span>• Modifié</span>\n                <span class=\"pe-2\" style=\"color: grey\">{{\n                  getDate($store.state.item.updatedAt)\n                }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"DevisInfo\",\n  props: [],\n  data() {\n    return {};\n  },\n  methods: {\n    async Statut(status) {\n      this.$store.state.item.status = status;\n\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/devis/update/`, {\n        method: \"post\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(this.$store.state.item),\n      });\n      let data = await res.json();\n      if(data.message){\n        console.log(data.message);\n        this.$router.go(\"Devis\");\n      }\n    },\n\n    Download() {\n      window.location = `https://hkos-back.herokuapp.com/devis/download/${this.$store.state.item.uuid}`;\n    },\n    getDate(value) {\n      return new Date(Date.parse(value)).toLocaleString();\n    },\n\n getStatus(value, type) {\n      let color;\n      if (value == \"DRAFT\") {\n        let res = \"Brouillon\";\n        value = res;\n        color = \"rgba(255, 151, 87, 0.3)\";\n      } else if (value == \"CREATED\") {\n        let res = \"Créé\";\n        value = res;\n        color = \"rgba(102, 228, 240, 0.5)\";\n      } else if (value == \"PAYED\") {\n        let res = \"Facturé\";\n        value = res;\n        color = \"rgba(87, 255, 112, 0.5)\";\n      } else if (value == \"CANCELLED\") {\n        let res = \"Annulé\";\n        value = res;\n        color = \"rgba(255, 87, 90, 0.6)\";\n      }\n      return type == \"text\" ? value : color;\n    },\n  },\n\n};\n</script>\n\n\n<style scoped>\n* {\n  font-size: 14px;\n}\n.overlay {\n  background: rgba(0, 0, 0, 0.5);\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  overflow: auto;\n  z-index: 9999;\n}\n\n.modale {\n  background: white;\n  border: 5px solid rgb(50, 141, 245);\n  width: 90%;\n  margin: 100px auto;\n  border-radius: 15px;\n\n}\n</style>"]},"metadata":{},"sourceType":"module"}