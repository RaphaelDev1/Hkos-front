{"ast":null,"code":"import _defineProperty from \"/Users/feyraf/Desktop/projet Hkos/hkos-project-front/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n\nclass TableRow {\n  constructor() {\n    _defineProperty(this, \"product\", \"\");\n\n    _defineProperty(this, \"dateproduct\", \"\");\n\n    _defineProperty(this, \"uniteproduct\", \"\");\n\n    _defineProperty(this, \"quantiteproduct\", \"\");\n\n    _defineProperty(this, \"htprixproduct\", \"\");\n\n    _defineProperty(this, \"tvaproduct\", \"\");\n\n    _defineProperty(this, \"montantproduct\", \"\");\n  }\n\n}\n\nexport default {\n  name: \"FactureBlockGenerateur\",\n  props: {\n    msg: String\n  },\n\n  data() {\n    return {\n      status: false,\n      form: {\n        facturenum: \"\",\n        facturedate: \"\",\n        limitedate: \"\",\n        messagefacture: \"\",\n        table: [new TableRow()]\n      }\n    };\n  },\n\n  methods: {\n    addRow() {\n      this.form.table.push(new TableRow());\n    },\n\n    async sendForm() {\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/save-facture`, {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(this.form)\n      });\n      let data = await res.text();\n      console.log(data);\n      if (data == \"ok\") this.status = true;\n    }\n\n  },\n\n  updated() {\n    console.log(this.form);\n  }\n\n};","map":{"version":3,"mappings":";;AAyKA,MAAMA,QAAN,CAAe;EAAA;IAAA,iCACH,EADG;;IAAA,qCAEC,EAFD;;IAAA,sCAGE,EAHF;;IAAA,yCAIK,EAJL;;IAAA,uCAKG,EALH;;IAAA,oCAMA,EANA;;IAAA,wCAOI,EAPJ;EAAA;;AAAA;;AAUf,eAAe;EACbC,IAAI,EAAE,wBADO;EAEbC,KAAK,EAAE;IACLC,GAAG,EAAEC;EADA,CAFM;;EAMbC,IAAI,GAAG;IACL,OAAO;MACLC,MAAM,EAAE,KADH;MAELC,IAAI,EAAE;QACJC,UAAU,EAAE,EADR;QAEJC,WAAW,EAAE,EAFT;QAGJC,UAAU,EAAE,EAHR;QAIJC,cAAc,EAAE,EAJZ;QAKJC,KAAK,EAAE,CAAC,IAAIZ,QAAJ,EAAD;MALH;IAFD,CAAP;EAUD,CAjBY;;EAkBba,OAAO,EAAE;IACPC,MAAM,GAAG;MACP,KAAKP,IAAL,CAAUK,KAAV,CAAgBG,IAAhB,CAAqB,IAAIf,QAAJ,EAArB;IACD,CAHM;;IAIP,MAAMgB,QAAN,GAAiB;MACf,IAAIC,GAAE,GAAI,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,gBAAiB,eAAjC,EAAiD;QACpEC,MAAM,EAAE,MAD4D;QAEpEC,OAAO,EAAE;UAAE,gBAAgB;QAAlB,CAF2D;QAGpEC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAKnB,IAApB;MAH8D,CAAjD,CAArB;MAMA,IAAIF,IAAG,GAAI,MAAMY,GAAG,CAACU,IAAJ,EAAjB;MAEAC,OAAO,CAACC,GAAR,CAAYxB,IAAZ;MAEA,IAAIA,IAAG,IAAK,IAAZ,EAAkB,KAAKC,MAAL,GAAc,IAAd;IACnB;;EAhBM,CAlBI;;EAoCbwB,OAAO,GAAG;IACRF,OAAO,CAACC,GAAR,CAAY,KAAKtB,IAAjB;EACD;;AAtCY,CAAf","names":["TableRow","name","props","msg","String","data","status","form","facturenum","facturedate","limitedate","messagefacture","table","methods","addRow","push","sendForm","res","fetch","process","env","VUE_APP_ROOT_API","method","headers","body","JSON","stringify","text","console","log","updated"],"sourceRoot":"","sources":["/Users/feyraf/Desktop/projet Hkos/hkos-project-front/src/components/user/Facture/FactureBlockGenerateur.vue"],"sourcesContent":["<template>\n  <div class=\"container col-sm-10 col-lg-12 devisMain\">\n    <div class=\"border-bottom\"><h3 class=\"fw-normal\">Facture</h3></div>\n    <div class=\"devisGenerateur border-bottom pb-5 pt-5 row\">\n      <div class=\"devisGenerateurLeft col-lg\">\n        <!-- left -->\n\n        <div class=\"pb-2\">\n          <label class=\"form-label\">Client</label>\n          <select class=\"form-control\" type=\"\">\n            <option value=\"\">Sélectionner ou créer un client</option>\n            <option value=\"\">Client2</option>\n            <option value=\"\">Client3</option>\n          </select>\n        </div>\n\n        <div class=\"pb-2\">\n          <label class=\"form-label\">Numéro de facture</label>\n          <input\n            class=\"form-control\"\n            v-model=\"form.facturenum\"\n            type=\"number\"\n            placeholder=\"1\"\n          />\n        </div>\n\n        <div class=\"pb-2\">\n          <label class=\"form-label\">Date</label>\n          <input class=\"form-control\" v-model=\"form.facturedate\" type=\"date\" />\n        </div>\n\n        <div class=\"pb-2\">\n          <label class=\"form-label\">Date limite de réglement </label>\n          <input class=\"form-control\" v-model=\"form.limitedate\" type=\"date\" />\n        </div>\n      </div>\n      <div class=\"devisGenerateurRight col-lg\">\n        <!-- right -->\n\n        <div>\n          <label for=\"inputDesctiption\">Message</label>\n          <textarea\n            class=\"form-control\"\n            rows=\"4\"\n            v-model=\"form.messagefacture\"\n          ></textarea>\n        </div>\n      </div>\n    </div>\n    <!--Devis info -->\n\n    <div class=\"table col-sm-10 col-lg-12\">\n      <div\n        class=\"t-row row m-auto input-group mt-5\"\n        id=\"devismainblock\"\n        v-for=\"row in form.table\"\n        :key=\"row\"\n      >\n        <div class=\"col-xl-4\" id=\"devismainblock\">\n          <label class=\"\">Description</label>\n          <input class=\"form-control\" v-model=\"row.product\" type=\"text\" />\n        </div>\n        <div class=\"col\">\n          <label class=\"\">Date</label>\n          <input class=\"form-control\" v-model=\"row.dateproduct\" type=\"date\" />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Quantité</label>\n          <input\n            id=\"qty\"\n            class=\"form-control calc-inp\"\n            v-model=\"row.quantiteproduct\"\n            type=\"number\"\n            placeholder=\"1\"\n            step=\"0.1\"\n          />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Unité</label>\n          <select\n            id=\"unit\"\n            class=\"form-control\"\n            type=\"\"\n            v-model=\"row.uniteproduct\"\n          >\n            <option value=\"Piéce(s)\">Piéce(s)</option>\n            <option value=\"Heures\">Heures</option>\n            <option value=\"Kilometres\">Km</option>\n            <option value=\"Kilogrammes\">Kg</option>\n            <option value=\"Metres\">M</option>\n            <option value=\"Lot\">Lot Parc</option>\n            <option value=\"Am\">Am</option>\n          </select>\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Prix(€)</label>\n          <input\n            id=\"price\"\n            class=\"form-control calc-inp\"\n            type=\"number\"\n            v-model=\"row.htprixproduct\"\n            step=\"0.01\"\n          />\n        </div>\n        <div class=\"col\">\n          <label class=\"\">TVA(%)</label>\n          <input\n            id=\"tax\"\n            class=\"form-control calc-inp\"\n            type=\"number\"\n            v-model=\"row.tvaproduct\"\n            placeholder=\"20%\"\n            step=\"0.1\"\n            pattern=\"[0-9]+\"\n          />\n        </div>\n        <div class=\"col\">\n          <label class=\"\">Montant(€)</label>\n          <input\n            id=\"amount\"\n            class=\"form-control\"\n            type=\"number\"\n            v-model=\"row.montantproduct\"\n            placeholder=\"0.00\"\n            step=\"0.01\"\n            readonly=\"readonly\"\n          />\n        </div>\n      </div>\n    </div>\n    <!-- table -->\n\n    <div class=\"mx-auto\">\n      <button\n        class=\"btn btn-light border mt-3\"\n        id=\"addbutton\"\n        type=\"button\"\n        @click=\"addRow\"\n        style=\"\"\n      >\n        Ajouter une ligne +\n      </button>\n    </div>\n  </div>\n\n   <a href=\"https://hkos-back.herokuapp.com/download\" v-if=\"status\">Download</a>\n\n  <div class=\"d-flex justify-content-center m-4\" v-else>\n    <button\n      class=\"btn btn2\"\n      style=\"\n        background-color: rgb(50, 141, 245);\n        color: white;\n        padding: 6px 18px;\n        margin: 8px;\n      \"\n      @click=\"sendForm\"\n    >\n      Générer ma facture\n    </button>\n\n\n  </div>\n</template>\n\n<script>\nclass TableRow {\n  product = \"\";\n  dateproduct = \"\";\n  uniteproduct = \"\";\n  quantiteproduct = \"\";\n  htprixproduct = \"\";\n  tvaproduct = \"\";\n  montantproduct = \"\";\n}\n\nexport default {\n  name: \"FactureBlockGenerateur\",\n  props: {\n    msg: String,\n  },\n\n  data() {\n    return {\n      status: false,\n      form: {\n        facturenum: \"\",\n        facturedate: \"\",\n        limitedate: \"\",\n        messagefacture: \"\",\n        table: [new TableRow()],\n      },\n    };\n  },\n  methods: {\n    addRow() {\n      this.form.table.push(new TableRow());\n    },\n    async sendForm() {\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/save-facture`, {\n        method: \"post\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(this.form),\n      });\n\n      let data = await res.text();\n\n      console.log(data);\n\n      if (data == \"ok\") this.status = true;\n    },\n  },\n  updated() {\n    console.log(this.form);\n  },\n};\n</script>\n\n"]},"metadata":{},"sourceType":"module"}