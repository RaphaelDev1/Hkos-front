{"ast":null,"code":"export default {\n  name: \"FactureInfo\",\n  props: [],\n\n  data() {\n    return {};\n  },\n\n  methods: {\n    async Statut(status) {\n      this.$store.state.item.status = status;\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/facture/update/`, {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(this.$store.state.item)\n      });\n      let data = await res.json();\n\n      if (data.message) {\n        console.log(data.message);\n        this.$router.go(\"Facture\");\n      }\n    },\n\n    async Duplicate() {\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/facture/duplicate/`, {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          \"uuid\": this.$store.state.item.uuid\n        })\n      });\n      let data = await res.json();\n\n      if (data.message) {\n        console.log(data.message);\n        this.$router.go(\"Facture\");\n      }\n    },\n\n    async Delete(el) {\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/facture/delete/${el}`, {\n        method: \"delete\"\n      });\n      let data = await res.json();\n\n      if (data) {\n        return this.$router.go(\"Facture\");\n      }\n    },\n\n    getDate(value) {\n      return new Date(Date.parse(value)).toLocaleString();\n    },\n\n    getStatus(value) {\n      if (value == \"DRAFT\") {\n        let res = \"Brouillon\";\n        value = res;\n      } else if (value == \"CREATED\") {\n        let res = \"Créé\";\n        value = res;\n      } else if (value == \"PAYED\") {\n        let res = \"Facturé\";\n        value = res;\n      } else if (value == \"CANCELLED\") {\n        let res = \"Annulé\";\n        value = res;\n      }\n\n      return value;\n    },\n\n    getStatusButtonClass(value) {\n      if (value == \"DRAFT\") {\n        return \"btn-outline-secondary\";\n      } else if (value == \"CREATED\") {\n        return \"btn-outline-info\";\n      } else if (value == \"PAYED\") {\n        return \"btn-outline-success\";\n      } else if (value == \"CANCELLED\") {\n        return \"btn-outline-danger\";\n      }\n\n      return \"btn-outline-default\";\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["name","props","data","methods","Statut","status","$store","state","item","res","fetch","process","env","VUE_APP_ROOT_API","method","headers","body","JSON","stringify","json","message","console","log","$router","go","Duplicate","uuid","Delete","el","getDate","value","Date","parse","toLocaleString","getStatus","getStatusButtonClass"],"sourceRoot":"","sources":["/Users/feyraf/Desktop/projet Hkos/hkos-project-front/src/components/user/Facture/FactureInfo.vue"],"sourcesContent":["\n<template>\n  <div\n    class=\"overlay\"\n    v-if=\"$store.state.revele\"\n    v-on:click=\"$store.dispatch('toggleModal', { target: $event.target })\"\n  >\n    <div class=\"modale\">\n      <div class=\"container\">\n        <div class=\"pt-3 pb-3 border-bottom\">\n          <div class=\"d-flex justify-content-between\">\n           <a target=\"_blank\"\n              @click=\"$store.dispatch('togglePdfModal', {\n                status: true,\n                data: facture,\n                event: $event.target,\n              })\"\n            >\n              <i class=\"fa-solid fa-eye btn\" style=\"font-size:20px; color:rgb(50, 141, 245)\"></i>\n            </a>\n            <a class=\"\" id=\"close-btn\"><i class=\"fa-solid fa-x btn\" id=\"close-btn\" style=\"font-size:18px; color:rgb(50, 141, 245); cursor:pointer\"></i></a>\n          </div>\n          <h3 class=\"m-auto\" style=\"font-weight: 300; text-align: center\">\n            Facture № {{ $store.state.item.reference }}\n          </h3>\n          <div class=\"w-25 text-center m-auto\" >\n            <span class=\"mt-3 btn rounded-pill disabled\" :class=\"[getStatusButtonClass($store.state.item.status)]\"\n              >\n             {{ getStatus($store.state.item.status, \"text\") }}\n          </span>\n\n          </div>\n        </div>\n\n        <div class=\"pb-5 mt-3 row m-auto\">\n          <div class=\"col-lg\">\n            <!-- left -->\n\n            <div class=\"pb-2 d-flex justify-content-between\">\n              <div class=\"\">\n                <a\n                  class=\"btn btn-success\"\n          \n                  href=\"mailto:\"\n                >\n                  Envoyer\n                </a>\n              </div>\n              <div class=\"\">\n                <button\n                  class=\"btn dropdown-toggle btn-outline-secondary\"\n                  type=\"button\"\n                  data-bs-toggle=\"dropdown\"\n                  aria-expanded=\"false\"\n                >\n                  Options\n                </button>\n                <ul class=\"dropdown-menu\">\n                  <li>\n                    <a class=\"dropdown-item\" :href=\"`https://hkos-back.herokuapp.com/facture/download/${$store.state.item.uuid}`\">Télécharger</a>\n                  </li>\n                  <li>\n                    <router-link\n                      class=\"dropdown-item\"\n                      id=\"close-btn\"\n                      :to=\"`/edit-facture/${$store.state.item.uuid}`\"\n                      >Modifier</router-link\n                    >\n                  </li>\n                  <li>\n                    <a class=\"dropdown-item\" @click=\"Duplicate\" href=\"#\">Dupliquer</a>\n                  </li>\n                  <li>\n                     <a class=\"dropdown-item\" @click=\"Delete($store.state.item.uuid)\"\n                          >Supprimer</a\n                        >\n                  </li>\n                </ul>\n              </div>\n\n              <div class=\"dropdown\">\n                <button\n                  class=\"btn dropdown-toggle btn-outline-secondary\"\n                  type=\"button\"\n                  data-bs-toggle=\"dropdown\"\n                  aria-expanded=\"false\"\n                >\n                  Statut\n                </button>\n                <button class=\"dropdown-menu\">\n                  <a  class=\"dropdown-item\" @click=\"Statut('DRAFT')\"\n                    >Brouillon</a\n                  >\n                  <a class=\"dropdown-item\" @click=\"Statut('CREATED')\">Créé</a>\n\n                  <a  class=\"dropdown-item\" @click=\"Statut('PAYED')\"\n                    >Facturé</a\n                  >\n\n                  <a class=\"dropdown-item\" @click=\"Statut('CANCELLED')\" >Annulé</a>\n                </button>\n              </div>\n            </div>\n\n            <div class=\"mt-3 pt-2 pb-2 bg-light\">\n              <div class=\"ps-3\">\n                {{ $store.state.item.clients[0].nom }}\n                {{ $store.state.item.clients[0].prenoms }}\n              </div>\n              <div class=\"ps-3\">{{ $store.state.item.clients[0].adresse }}</div>\n              <div class=\"ps-3\">\n                {{ $store.state.item.clients[0].codePostal }}\n              </div>\n              <div class=\"ps-3\">{{ $store.state.item.clients[0].pays }}</div>\n            </div>\n\n            <div class=\"mt-3 pb-3 border-bottom\">\n              <div>Commentaires :{{ $store.state.item.commentaires }}</div>\n            </div>\n\n            <div class=\"mt-3 d-flex justify-content-between\">\n              <span style=\"font-weight: 300\">Total HT</span>\n              <span style=\"font-weight: 300\"\n                >{{ $store.state.item.totalHT }} €\n              </span>\n            </div>\n\n            <div class=\"mt-3 d-flex justify-content-between\">\n              <span style=\"font-weight: 300\">TVA</span>\n              <span style=\"font-weight: 300\"\n                >{{ $store.state.item.totalTVA }} €</span\n              >\n            </div>\n\n            <div class=\"mt-3 pb-3 border-bottom d-flex justify-content-between\">\n              <span style=\"font-weight: 300\">Total TTC</span>\n              <span style=\"font-weight: 300\"\n                >{{ $store.state.item.totalTTC }} €</span\n              >\n            </div>\n\n            <div class=\"mt-4 pt-2 pb-2 bg-light\">\n              <div class=\"ps-3\" style=\"font-weight: 300\">Historique</div>\n              <div class=\"ps-3 mt-3 d-flex justify-content-between\">\n                <span>• Créé</span>\n                <span class=\"pe-2\" style=\"color: grey\">{{\n                  getDate($store.state.item.createdAt)\n                }}</span>\n              </div>\n\n                            <div class=\"ps-3 mt-3 d-flex justify-content-between\">\n                <span>• Modifié</span>\n                <span class=\"pe-2\" style=\"color: grey\">{{\n                  getDate($store.state.item.updatedAt)\n                }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FactureInfo\",\n  props: [],\n  data() {\n    return {};\n  },\n  methods: {\n    async Statut(status) {\n      this.$store.state.item.status = status;\n\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/facture/update/`, {\n        method: \"post\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(this.$store.state.item),\n      });\n      let data = await res.json();\n      if(data.message){\n        console.log(data.message);\n        this.$router.go(\"Facture\");\n      }\n    },\n\n        async Duplicate() {\n           \n\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/facture/duplicate/`, {\n        method: \"post\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\"uuid\": this.$store.state.item.uuid}),\n      });\n      let data = await res.json();\n      if(data.message){\n        console.log(data.message);\n        this.$router.go(\"Facture\");\n      }\n    },\n\n        async Delete(el) {\n      let res = await fetch(\n        `${process.env.VUE_APP_ROOT_API}/facture/delete/${el}`,\n        {\n          method: \"delete\",\n        }\n      );\n      let data = await res.json();\n      if (data) {\n        return this.$router.go(\"Facture\");\n      }\n    },\n\n    getDate(value) {\n      return new Date(Date.parse(value)).toLocaleString();\n    },\n\ngetStatus(value) {\n      if (value == \"DRAFT\") {\n        let res = \"Brouillon\";\n        value = res;\n      } else if (value == \"CREATED\") {\n        let res = \"Créé\";\n        value = res;\n      } else if (value == \"PAYED\") {\n        let res = \"Facturé\";\n        value = res;\n      } else if (value == \"CANCELLED\") {\n        let res = \"Annulé\";\n        value = res;\n      }\n      return value;\n    },\n\n    getStatusButtonClass(value) {\n      if (value == \"DRAFT\") {\n        return \"btn-outline-secondary\";\n      } else if (value == \"CREATED\") {\n        return \"btn-outline-info\";\n      } else if (value == \"PAYED\") {\n        return \"btn-outline-success\";\n      } else if (value == \"CANCELLED\") {\n        return \"btn-outline-danger\";\n      }\n      return \"btn-outline-default\";\n    },\n  },\n\n};\n</script>\n\n\n<style scoped>\n* {\n  font-size: 14px;\n}\n.overlay {\n  background: rgba(0, 0, 0, 0.5);\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  overflow: auto;\n  z-index: 9999;\n}\n\n.modale {\n  background: white;\n  border: 5px solid rgb(50, 141, 245);\n  width: 90%;\n  margin: 100px auto;\n  border-radius: 15px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}