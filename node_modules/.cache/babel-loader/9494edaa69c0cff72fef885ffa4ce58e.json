{"ast":null,"code":"// import FactureInfo from \"./FactureInfo.vue\";\n// import PdfModal from \"./PdfModal.vue\";\nimport $ from \"jquery\";\nimport DataTable from \"datatables.net-dt\";\nlet Table = null;\nexport default {\n  name: \"ContratBlock\",\n  props: {},\n  components: {// FactureInfo,\n    // PdfModal,\n  },\n\n  data() {\n    return {\n      revele: false,\n      pdfShow: false,\n      Clients: [],\n      apiBase: process.env.VUE_APP_ROOT_API\n    };\n  },\n\n  methods: {\n    setTab(value) {\n      Table.search(value).draw();\n    },\n\n    async showPdfModal() {\n      this.$store.dispatch(\"togglePdfModal\", {\n        status: true\n      });\n    },\n\n    getDate(value) {\n      return new Date(Date.parse(value)).toLocaleDateString();\n    },\n\n    getStatusButtonClass(value) {\n      if (value == \"DRAFT\") {\n        return \"btn-draft\";\n      } else if (value == \"CREATED\") {\n        return \"btn-created\";\n      } else if (value == \"PAYED\") {\n        return \"btn-payed\";\n      } else if (value == \"CANCELLED\") {\n        return \"btn-cancelled\";\n      }\n\n      return \"btn-default\";\n    },\n\n    getStatus(value) {\n      if (value == \"DRAFT\") {\n        let res = \"Brouillon\";\n        value = res;\n      } else if (value == \"CREATED\") {\n        let res = \"Créé\";\n        value = res;\n      } else if (value == \"PAYED\") {\n        let res = \"Facturé\";\n        value = res;\n      } else if (value == \"CANCELLED\") {\n        let res = \"Annulé\";\n        value = res;\n      }\n\n      return value;\n    },\n\n    async Delete(el) {\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/facture/delete/${el}`, {\n        method: \"delete\"\n      });\n      let data = await res.json();\n\n      if (data) {\n        return this.$router.go(\"Facture\");\n      }\n    }\n\n  },\n\n  updated() {\n    $(\"table\").dataTable().fnDestroy();\n    Table = $(\"table\").DataTable({\n      language: {\n        search: \"\",\n        info: \" _PAGE_ sur _PAGES_ page(s)\",\n        infoFiltered: \" - filtré à partir de _MAX_ éléments\",\n        infoEmpty: \"Aucun élément à afficher\",\n        zeroRecords: \"Aucun élément correspondant trouvé\",\n        lengthMenu: \"_MENU_ éléments\",\n        paginate: {\n          first: \"First\",\n          last: \"Last\",\n          next: \"Suivant\",\n          previous: \"Précédent\"\n        }\n      },\n      aaSorting: [],\n      scrollX: true\n    });\n    $('[type=\"search\"]').attr(\"placeholder\", \" Recherche par numéro, client...\");\n  },\n\n  mounted() {\n    console.log(DataTable);\n    this.$store.dispatch(\"getFacture\");\n  },\n\n  computed: {\n    getFacture() {\n      return this.$store.state.Contrat;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["$","DataTable","Table","name","props","components","data","revele","pdfShow","Clients","apiBase","process","env","VUE_APP_ROOT_API","methods","setTab","value","search","draw","showPdfModal","$store","dispatch","status","getDate","Date","parse","toLocaleDateString","getStatusButtonClass","getStatus","res","Delete","el","fetch","method","json","$router","go","updated","dataTable","fnDestroy","language","info","infoFiltered","infoEmpty","zeroRecords","lengthMenu","paginate","first","last","next","previous","aaSorting","scrollX","attr","mounted","console","log","computed","getFacture","state","Contrat"],"sourceRoot":"","sources":["/Users/feyraf/Desktop/projet Hkos/hkos-project-front/src/components/user/Contrat/ContratBlock.vue"],"sourcesContent":["<template>\n  <!-- <FactureInfo v-bind:revele=\"revele\" v-bind:toggleModal=\"toggleModal\" />\n  <PdfModal v-bind:pdfShow=\"pdfShow\" v-bind:togglePdfModal=\"togglePdfModal\" /> -->\n\n  <div class=\"container\">\n    <div class=\"border-bottom\">\n      <span class=\"fw-normal\" style=\"font-size: 20px\"\n        ><i\n          class=\"fa-solid fa-circle\"\n          style=\"font-size: 18px; color: rgb(50, 141, 245)\"\n        ></i>\n        Contrat</span\n      >\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md mt-4\">\n        <div class=\"input-group col\">\n          <router-link\n            to=\"/generateur-facture\"\n            class=\"btn-hkos\"\n            style=\"min-width: 140px\"\n            >+ Nouveau Contrat\n          </router-link>\n        </div>\n\n        <div class=\"mt-4\">\n          <div class=\"row row-cols-2 row-cols-lg-4 g-2 g-lg-3\">\n\n\n            <div class=\"col\">\n              <div class=\"p-3 hkosblue text-center text-white\">\n                <div class=\"text-center\">\n                  <p class=\"text-white mt-2\" style=\"font-size: 26px\">23</p>\n                  <p class=\"text-white\">CDI</p>\n                </div>\n              </div>\n            </div>\n\n\n            <div class=\"col\">\n              <div class=\"p-3 hkosblue1 text-center text-white\">\n                <div class=\"text-center\">\n                  <p class=\"text-white mt-2\" style=\"font-size: 26px\">5</p>\n                  <p class=\"text-white\">CDD</p>\n                </div>\n              </div>\n            </div>\n\n\n            <div class=\"col\">\n              <div class=\"p-3 hkosblue text-center\">\n                <p class=\"text-white mt-2\" style=\"font-size: 26px\">XXX-XX $</p>\n                <p class=\"text-white\">Charge salariale</p>\n              </div>\n            </div>\n\n\n           <div class=\"col\">\n              <div class=\"p-3 hkosyellow text-center\">\n                <p class=\"text-hkos mt-2\" style=\"font-size: 26px\">XXX-XX $</p>\n                <p class=\"text-hkos\">URSAFF en cours</p>\n              </div>\n            </div>\n\n\n            <div class=\"col\">\n              <div class=\"p-3 hkosblue2 text-center text-white\">\n                <div class=\"text-center\">\n                  <p class=\"text-white mt-2\" style=\"font-size: 26px\">3</p>\n                  <p class=\"text-white\">Interim</p>\n                </div>\n              </div>\n            </div>\n\n\n            <div class=\"col\">\n              <div class=\"p-3 hkosblue3 text-center text-white\">\n                <div class=\"text-center\">\n                  <p class=\"text-hkos mt-2\" style=\"font-size: 26px\">2</p>\n                  <p class=\"text-hkos\">Stagaires</p>\n                </div>\n              </div>\n            </div>\n\n\n          </div>\n        </div>\n\n        <!-- <div class=\"mt-4 \">\n          <div class=\"row \">\n            <div class=\"col hkosblue text-center \" style=\"\">\n              <div class=\"text-center\">\n                <p class=\"text-white mt-2\" style=\"font-size:26px\">XXX-XX $</p>\n                <p class=\"text-white\">Charge salariale</p>\n                \n              </div>\n            </div>\n\n            <div class=\"col hkosyellow text-center\" style=\"\">\n              <div class=\" text-center\">\n                <p class=\"text-hkos mt-2\" style=\"font-size:26px\">XXX-XX $</p>\n                <p class=\"text-hkos\">URSAFF En cours</p>\n                \n              </div>\n            </div>\n            <div class=\"col hkosblue text-center\" style=\"\">\n              <div class=\" text-center\">\n                <p class=\"text-white mt-2\" style=\"font-size:26px\">23</p>\n                <p class=\"text-white\" >CDI</p>\n                \n              </div>\n            </div>\n\n            <div class=\"col hkosyellow text-center\" style=\"\">\n              <div class=\" text-center\">\n                <p class=\"text-hkos mt-2\" style=\"font-size:26px\">5</p>\n                <p class=\"text-hkos\">CDD</p>\n                \n              </div>\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col\" style=\"height: 50px; background: yellow\"></div>\n            <div class=\"col hkosblue\" style=\"height: 50px\"></div>\n            <div class=\"col\" style=\"height: 50px; background: yellow\"></div>\n            <div class=\"col hkosblue\" style=\"height: 50px\"></div>\n          </div>\n        </div> -->\n\n        <div class=\"container-auto mt-4 row\">\n          <a class=\"aSearch col\" @click=\"setTab('')\">CDI</a>\n          <a class=\"aSearch col\" @click=\"setTab('Brouillon')\">CDD</a>\n          <a class=\"aSearch col\" @click=\"setTab('Créé')\">Interim</a>\n          <a class=\"aSearch col\" @click=\"setTab('Facturé')\">Stagaire</a>\n        </div>\n\n        <div class=\"\">\n          <table>\n            <thead>\n              <tr>\n                <th>Numéro ▾</th>\n                <th>Date ▾</th>\n                <th>Client ▾</th>\n                <th>Montant ▾</th>\n                <th>Statut ▾</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              <tr\n                v-for=\"facture in getFacture\"\n                :key=\"facture\"\n                v-on:click=\"\n                  $store.dispatch('toggleModal', {\n                    status: true,\n                    data: facture,\n                    event: $event.target,\n                  })\n                \"\n              >\n                <td>{{ facture.reference }}</td>\n                <td>{{ getDate(facture.createdAt) }}</td>\n                <td>\n                  {{ facture.clients[0].nom }} {{ facture.clients[0].prenoms }}\n                </td>\n                <td>{{ facture.totalTTC }} €</td>\n                <td class=\"optionsLine\" @click.stop>\n                  <div class=\"dropdown\">\n                    <button\n                      :class=\"[getStatusButtonClass(facture.status)]\"\n                      class=\"dropdown-toggle\"\n                      type=\"button\"\n                      data-bs-toggle=\"dropdown\"\n                      aria-expanded=\"false\"\n                    >\n                      {{ getStatus(facture.status) }}\n                    </button>\n                    <ul class=\"dropdown-menu\">\n                      <li>\n                        <a\n                          class=\"dropdown-item\"\n                          @click=\"\n                            $store.dispatch('togglePdfModal', {\n                              status: true,\n                              data: facture,\n                              event: $event.target,\n                            })\n                          \"\n                          >Visualiser le PDF</a\n                        >\n                      </li>\n                      <li>\n                        <a\n                          class=\"dropdown-item\"\n                          :href=\"`${apiBase}/facture/download/${facture.uuid}`\"\n                          >Télécharger</a\n                        >\n                      </li>\n                      <li>\n                        <router-link\n                          class=\"dropdown-item\"\n                          :to=\"`/edit-facture/${facture.uuid}`\"\n                          >Modifier</router-link\n                        >\n                      </li>\n                      <li>\n                        <a class=\"dropdown-item\" @click=\"Delete(facture.uuid)\"\n                          >Supprimer</a\n                        >\n                      </li>\n                    </ul>\n                  </div>\n                </td>\n              </tr>\n\n              <!-- {getClient(facture.clientUuid)} -->\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n    <div class=\"head-block2\"></div>\n  </div>\n</template>\n\n<script>\n// import FactureInfo from \"./FactureInfo.vue\";\n// import PdfModal from \"./PdfModal.vue\";\n\nimport $ from \"jquery\";\nimport DataTable from \"datatables.net-dt\";\n\nlet Table = null;\n\nexport default {\n  name: \"ContratBlock\",\n  props: {},\n  components: {\n    // FactureInfo,\n    // PdfModal,\n  },\n  data() {\n    return {\n      revele: false,\n      pdfShow: false,\n      Clients: [],\n      apiBase: process.env.VUE_APP_ROOT_API,\n    };\n  },\n\n  methods: {\n    setTab(value) {\n      Table.search(value).draw();\n    },\n\n    async showPdfModal() {\n      this.$store.dispatch(\"togglePdfModal\", { status: true });\n    },\n\n    getDate(value) {\n      return new Date(Date.parse(value)).toLocaleDateString();\n    },\n\n    getStatusButtonClass(value) {\n      if (value == \"DRAFT\") {\n        return \"btn-draft\";\n      } else if (value == \"CREATED\") {\n        return \"btn-created\";\n      } else if (value == \"PAYED\") {\n        return \"btn-payed\";\n      } else if (value == \"CANCELLED\") {\n        return \"btn-cancelled\";\n      }\n      return \"btn-default\";\n    },\n\n    getStatus(value) {\n      if (value == \"DRAFT\") {\n        let res = \"Brouillon\";\n        value = res;\n      } else if (value == \"CREATED\") {\n        let res = \"Créé\";\n        value = res;\n      } else if (value == \"PAYED\") {\n        let res = \"Facturé\";\n        value = res;\n      } else if (value == \"CANCELLED\") {\n        let res = \"Annulé\";\n        value = res;\n      }\n      return value;\n    },\n\n    async Delete(el) {\n      let res = await fetch(\n        `${process.env.VUE_APP_ROOT_API}/facture/delete/${el}`,\n        {\n          method: \"delete\",\n        }\n      );\n      let data = await res.json();\n      if (data) {\n        return this.$router.go(\"Facture\");\n      }\n    },\n  },\n\n  updated() {\n    $(\"table\").dataTable().fnDestroy();\n    Table = $(\"table\").DataTable({\n      language: {\n        search: \"\",\n        info: \" _PAGE_ sur _PAGES_ page(s)\",\n        infoFiltered: \" - filtré à partir de _MAX_ éléments\",\n        infoEmpty: \"Aucun élément à afficher\",\n        zeroRecords: \"Aucun élément correspondant trouvé\",\n        lengthMenu: \"_MENU_ éléments\",\n        paginate: {\n          first: \"First\",\n          last: \"Last\",\n          next: \"Suivant\",\n          previous: \"Précédent\",\n        },\n      },\n      aaSorting: [],\n      scrollX: true,\n    });\n\n    $('[type=\"search\"]').attr(\n      \"placeholder\",\n      \" Recherche par numéro, client...\"\n    );\n  },\n\n  mounted() {\n    console.log(DataTable);\n    this.$store.dispatch(\"getFacture\");\n  },\n  computed: {\n    getFacture() {\n      return this.$store.state.Contrat;\n    },\n  },\n};\n</script>\n\n<style scoped>\n* {\n  font-size: 14px;\n}\n.info:hover {\n  background: lightgrey;\n}\n\n.optionsLine {\n  width: 10%;\n}\n</style>\n\n<style>\n.dataTables_length {\n  display: flex;\n  justify-content: flex-end;\n}\n.dataTables_length label {\n  font-size: 14px;\n  margin-top: 20px;\n  color: rgb(149, 146, 146);\n}\n.dataTables_length label select {\n  border: 1px solid rgb(149, 146, 146);\n  color: grey;\n  border-radius: 3px;\n}\ntable {\n  width: 100%;\n  cursor: pointer;\n}\n\nth {\n  min-width: 150px;\n  width: 20%;\n  border-bottom: 2px solid lightgray;\n  padding: 10px 15px;\n  color: rgb(50, 141, 245);\n}\n\nth:hover {\n  color: rgb(2, 65, 137);\n  transition: 0.3s;\n}\n\ntd {\n  min-width: 150px;\n  width: 20%;\n  padding: 10px 15px;\n  cursor: pointer;\n}\n\ntbody tr:hover {\n  background-color: rgb(242, 242, 242);\n}\n.dataTables_filter {\n  margin-top: 20px;\n  margin-bottom: 20px;\n  width: 100%;\n}\n.dataTables_filter label {\n  width: 100%;\n}\n\n.dataTables_filter input {\n  border: 1px solid lightgray;\n  padding: 5px;\n  border-radius: 10px;\n  width: 100%;\n}\n\n.dataTables_info {\n  margin-top: 20px;\n  font-size: 14px;\n}\n\n/* INFO buttons pagination */\n\n.dataTables_paginate {\n  display: flex;\n  justify-content: flex-end;\n  cursor: pointer;\n  align-items: center;\n}\n\n.dataTables_paginate a {\n  text-decoration: none;\n  color: black;\n  font-size: 14px;\n}\n\n.dataTables_paginate span a {\n  border: 1px solid transparent;\n  color: black;\n  padding: 6px;\n  box-sizing: content-box;\n}\n\n.paginate_button {\n  padding: 4px;\n  box-sizing: content-box;\n}\n\n.paginate_button:hover {\n  color: rgb(50, 141, 245);\n}\n\nspan .paginate_button:hover {\n  color: rgb(50, 141, 245);\n}\n.previous {\n  box-sizing: border-box;\n}\n\n.current {\n  background: rgb(50, 141, 245);\n  color: white !important;\n  height: inherit !important;\n}\n\ninput[type=\"search\"]::placeholder {\n  color: rgb(149, 146, 146);\n  font-size: 1em;\n}\n\n.vue-pdf-embed > div {\n  margin-bottom: 8px;\n  box-shadow: 0 2px 8px 4px rgba(0, 0, 0, 0.1);\n}\n\n.hkosblue {\n  background: rgb(50, 141, 245);\n}\n\n.hkosblue1 {\n  background: rgba(50, 141, 245, 0.8);\n}\n\n.hkosblue2 {\n  background: rgba(50, 141, 245, 0.6);\n}\n\n.hkosblue3 {\n  background: rgba(50, 141, 245, 0.4);\n}\n\n.hkosyellow {\n  background: rgb(242, 255, 2);\n}\n\n.text-hkos {\n  color: rgb(50, 141, 245);\n}\n</style>"]},"metadata":{},"sourceType":"module"}