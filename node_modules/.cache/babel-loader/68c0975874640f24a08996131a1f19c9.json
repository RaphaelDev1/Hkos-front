{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, createCommentVNode as _createCommentVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-07943a74\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"border-bottom\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"fw-normal\",\n  style: {\n    \"font-size\": \"20px\"\n  }\n}, \"Devis\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"pb-2 mt-3\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"Client\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = {\n  class: \"input-group pb-3 border-bottom\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\",\n  selected: \"\",\n  hidden: \"\"\n}, \" ▾ Sélectionner un client \", -1\n/* HOISTED */\n));\n\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = {\n  class: \"d-flex border-bottom pb-3 pt-3 row\"\n};\nconst _hoisted_8 = {\n  class: \"w-50 col-lg\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\",\n  for: \"inputDesctiption\"\n}, \"Commentaires\", -1\n/* HOISTED */\n));\n\nconst _hoisted_10 = {\n  class: \"w-50 col-lg\"\n};\nconst _hoisted_11 = {\n  class: \"pb-2\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\"\n}, \"Date limite de réglement \", -1\n/* HOISTED */\n));\n\nconst _hoisted_13 = {\n  class: \"table\"\n};\nconst _hoisted_14 = {\n  class: \"col-xl-4\",\n  id: \"devismainblock\"\n};\n\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Description\", -1\n/* HOISTED */\n));\n\nconst _hoisted_16 = [\"onUpdate:modelValue\"];\nconst _hoisted_17 = {\n  class: \"col\"\n};\n\nconst _hoisted_18 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Date\", -1\n/* HOISTED */\n));\n\nconst _hoisted_19 = [\"onUpdate:modelValue\"];\nconst _hoisted_20 = {\n  class: \"col\"\n};\n\nconst _hoisted_21 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Quantité\", -1\n/* HOISTED */\n));\n\nconst _hoisted_22 = [\"onUpdate:modelValue\"];\nconst _hoisted_23 = {\n  class: \"col\"\n};\n\nconst _hoisted_24 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Unité\", -1\n/* HOISTED */\n));\n\nconst _hoisted_25 = [\"onUpdate:modelValue\"];\n\nconst _hoisted_26 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"PIECE\\\" data-v-07943a74>Piéce(s)</option><option value=\\\"HEURE\\\" data-v-07943a74>Heures</option><option value=\\\"KM\\\" data-v-07943a74>Km</option><option value=\\\"KG\\\" data-v-07943a74>Kg</option><option value=\\\"M\\\" data-v-07943a74>M</option><option value=\\\"LOT_PARC\\\" data-v-07943a74>Lot Parc</option><option value=\\\"AM\\\" data-v-07943a74>Am</option>\", 7);\n\nconst _hoisted_33 = [_hoisted_26];\nconst _hoisted_34 = {\n  class: \"col\"\n};\n\nconst _hoisted_35 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Prix(€)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_36 = [\"onUpdate:modelValue\"];\nconst _hoisted_37 = {\n  class: \"col\"\n};\n\nconst _hoisted_38 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"TVA(%)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_39 = [\"onUpdate:modelValue\"];\nconst _hoisted_40 = {\n  class: \"col\"\n};\n\nconst _hoisted_41 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Montant(€)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_42 = [\"value\"];\nconst _hoisted_43 = {\n  class: \"mx-auto d-flex justify-content-between\"\n};\n\nconst _hoisted_44 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"mt-3 me-2\"\n}, \"Total HT(€)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_45 = [\"value\"];\n\nconst _hoisted_46 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"mt-3 me-2\"\n}, \"Total TVA(€)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_47 = [\"value\"];\n\nconst _hoisted_48 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"mt-3 me-2\"\n}, \"Total TTC\", -1\n/* HOISTED */\n));\n\nconst _hoisted_49 = [\"value\"];\nconst _hoisted_50 = {\n  id: \"notify\",\n  class: \"text-danger\"\n};\nconst _hoisted_51 = {\n  class: \"d-flex justify-content-center m-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AddClientBlock = _resolveComponent(\"AddClientBlock\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_AddClientBlock, {\n    onAccept: _cache[0] || (_cache[0] = $event => _ctx.$store.dispatch('getClients')),\n    revele: $data.revele,\n    toggleModale: $options.toggleModale\n  }, null, 8\n  /* PROPS */\n  , [\"revele\", \"toggleModale\"]), _createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n    class: \"input-group-text\",\n    onClick: _cache[1] || (_cache[1] = $event => _ctx.$store.dispatch('toggleModal', {\n      status: true,\n      event: $event.target\n    })),\n    id: \"open-modal\",\n    style: {\n      \"background-color\": \"rgb(50, 141, 245)\",\n      \"color\": \"white\"\n    }\n  }, \" Nouveau client + \"), _withDirectives(_createElementVNode(\"select\", {\n    class: \"form-control\",\n    style: {\n      \"font-weight\": \"300\"\n    },\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.clientUuid = $event)\n  }, [_hoisted_5, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.getClients, client => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      value: client.clientUuid,\n      key: client\n    }, _toDisplayString(client.nom) + \" \" + _toDisplayString(client.prenoms), 9\n    /* TEXT, PROPS */\n    , _hoisted_6);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))], 512\n  /* NEED_PATCH */\n  ), [[_vModelSelect, $data.form.clientUuid]])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", null, [_hoisted_9, _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"form-control\",\n    rows: \"4\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.commentaires = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.form.commentaires]])])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _withDirectives(_createElementVNode(\"input\", {\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.form.dateReglement = $event),\n    type: \"date\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.form.dateReglement]])])])]), _createElementVNode(\"div\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.form.lines, row => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"t-row row mt-2\",\n      id: \"devismainblock\",\n      key: row\n    }, [_createElementVNode(\"div\", _hoisted_14, [_hoisted_15, _withDirectives(_createElementVNode(\"input\", {\n      class: \"form-control\",\n      \"onUpdate:modelValue\": $event => row.productName = $event,\n      type: \"text\",\n      placeholder: \"Description\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_16), [[_vModelText, row.productName]])]), _createElementVNode(\"div\", _hoisted_17, [_hoisted_18, _withDirectives(_createElementVNode(\"input\", {\n      class: \"form-control\",\n      \"onUpdate:modelValue\": $event => row.date = $event,\n      type: \"date\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_19), [[_vModelText, row.date]])]), _createElementVNode(\"div\", _hoisted_20, [_hoisted_21, _withDirectives(_createElementVNode(\"input\", {\n      class: \"form-control calc-inp maclasse\",\n      \"onUpdate:modelValue\": $event => row.quantity = $event,\n      onKeydown: _cache[5] || (_cache[5] = (...args) => $options.format && $options.format(...args)),\n      placeholder: \"Quantité\",\n      type: \"number\",\n      step: \"1.0\"\n    }, null, 40\n    /* PROPS, HYDRATE_EVENTS */\n    , _hoisted_22), [[_vModelText, row.quantity]])]), _createElementVNode(\"div\", _hoisted_23, [_hoisted_24, _withDirectives(_createElementVNode(\"select\", {\n      class: \"form-control\",\n      type: \"\",\n      \"onUpdate:modelValue\": $event => row.units = $event\n    }, _hoisted_33, 8\n    /* PROPS */\n    , _hoisted_25), [[_vModelSelect, row.units]])]), _createElementVNode(\"div\", _hoisted_34, [_hoisted_35, _withDirectives(_createElementVNode(\"input\", {\n      class: \"form-control calc-inp\",\n      type: \"number\",\n      placeholder: \"Prix\",\n      \"onUpdate:modelValue\": $event => row.htPrice = $event\n    }, null, 8\n    /* PROPS */\n    , _hoisted_36), [[_vModelText, row.htPrice]])]), _createElementVNode(\"div\", _hoisted_37, [_hoisted_38, _withDirectives(_createElementVNode(\"input\", {\n      class: \"form-control calc-inp\",\n      type: \"number\",\n      \"onUpdate:modelValue\": $event => row.tvaPercent = $event,\n      onKeydown: _cache[6] || (_cache[6] = (...args) => $options.format && $options.format(...args)),\n      placeholder: \"TVA(%)\",\n      step: \"1\"\n    }, null, 40\n    /* PROPS, HYDRATE_EVENTS */\n    , _hoisted_39), [[_vModelText, row.tvaPercent]])]), _createElementVNode(\"div\", _hoisted_40, [_hoisted_41, _createElementVNode(\"input\", {\n      class: \"form-control\",\n      type: \"points\",\n      value: (row.finalPrice = row.quantity * row.htPrice * (1 + row.tvaPercent / 100)).toFixed(0),\n      placeholder: \"0.00\",\n      step: \"0.1\",\n      readonly: \"readonly\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_42)])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), _createCommentVNode(\" row.quantity * row.htPrice * (1 + row.tvaPercent / 100) \"), _createCommentVNode(\" Lines \"), _createElementVNode(\"div\", _hoisted_43, [_createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"btn btn-light border mt-3\",\n    type: \"button\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.addRow && $options.addRow(...args))\n  }, \" Ajouter + \")]), _createElementVNode(\"div\", null, [$data.form.lines.length > 1 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.removeLast && $options.removeLast(...args)),\n    class: \"btn btn-light border mt-3\"\n  }, \" Supprimer - \")) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", null, [_hoisted_44, _createElementVNode(\"input\", {\n    style: {\n      \"border\": \"none\"\n    },\n    type: \"number\",\n    placeholder: \"0.00\",\n    readonly: \"readonly\",\n    value: $data.form.totalHT = $options.getHT.toFixed(0)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_45)]), _createElementVNode(\"div\", null, [_hoisted_46, _createElementVNode(\"input\", {\n    style: {\n      \"border\": \"none\"\n    },\n    type: \"number\",\n    placeholder: \"0.00\",\n    readonly: \"readonly\",\n    value: $data.form.totalTVA = $options.getTVAeuro.toFixed(0)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_47)]), _createElementVNode(\"div\", null, [_hoisted_48, _createElementVNode(\"input\", {\n    style: {\n      \"border\": \"none\"\n    },\n    type: \"number\",\n    placeholder: \"0.00\",\n    readonly: \"readonly\",\n    value: $data.form.totalTTC = $options.getTotal.toFixed(0)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_49)])]), _createElementVNode(\"div\", _hoisted_50, _toDisplayString($data.err), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", _hoisted_51, [_createElementVNode(\"button\", {\n    class: \"btnHkos\",\n    onClick: _cache[9] || (_cache[9] = (...args) => $options.sendForm && $options.sendForm(...args))\n  }, \" Générer mon devis \")])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","style","value","disabled","selected","hidden","for","id","_hoisted_26","_createVNode","_component_AddClientBlock","onAccept","_ctx","dispatch","revele","$data","toggleModale","$options","_hoisted_2","_hoisted_3","onClick","status","event","$event","target","clientUuid","_hoisted_5","_createElementBlock","_Fragment","_renderList","client","key","nom","_toDisplayString","prenoms","_hoisted_6","_hoisted_9","rows","commentaires","_hoisted_12","dateReglement","type","lines","row","_hoisted_15","productName","placeholder","_hoisted_18","date","_hoisted_21","quantity","onKeydown","step","_hoisted_24","units","_hoisted_35","htPrice","_hoisted_38","tvaPercent","_hoisted_41","finalPrice","toFixed","readonly","_createCommentVNode","length","_hoisted_44","totalHT","_hoisted_46","totalTVA","_hoisted_48","totalTTC"],"sourceRoot":"","sources":["/Users/feyraf/Desktop/projet Hkos/hkos-project-front/src/components/user/Devis/DevisBlockGenerateur.vue"],"sourcesContent":["<template>\n  <AddClientBlock\n    @accept=\"$store.dispatch('getClients')\"\n    v-bind:revele=\"revele\"\n    v-bind:toggleModale=\"toggleModale\"\n  />\n  <div class=\"container\">\n    <div class=\"border-bottom\">\n      <span class=\"fw-normal\" style=\"font-size: 20px\">Devis</span>\n    </div>\n\n    <div class=\"pb-2 mt-3\"><span>Client</span></div>\n\n    <div class=\"input-group pb-3 border-bottom\">\n      <button\n        class=\"input-group-text\"\n        v-on:click=\"\n          $store.dispatch('toggleModal', { status: true, event: $event.target })\n        \"\n        id=\"open-modal\"\n        style=\"background-color: rgb(50, 141, 245); color: white\"\n      >\n        Nouveau client +\n      </button>\n      <select\n        class=\"form-control\"\n        style=\"font-weight: 300\"\n        v-model=\"form.clientUuid\"\n      >\n        <option value=\"\" disabled selected hidden>\n          ▾ Sélectionner un client\n        </option>\n        <option\n          :value=\"client.clientUuid\"\n          v-for=\"client in getClients\"\n          :key=\"client\"\n        >\n          {{ client.nom }} {{ client.prenoms }}\n        </option>\n      </select>\n    </div>\n\n    <div class=\"d-flex border-bottom pb-3 pt-3 row\">\n      <div class=\"w-50 col-lg\">\n        <div>\n          <label class=\"form-label\" for=\"inputDesctiption\">Commentaires</label>\n          <textarea\n            class=\"form-control\"\n            rows=\"4\"\n            v-model=\"form.commentaires\"\n          ></textarea>\n        </div>\n      </div>\n      <div class=\"w-50 col-lg\">\n        <div class=\"pb-2\">\n          <label class=\"form-label\">Date limite de réglement </label>\n          <input\n            class=\"form-control\"\n            v-model=\"form.dateReglement\"\n            type=\"date\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <div class=\"table\">\n      <div\n        class=\"t-row row mt-2\"\n        id=\"devismainblock\"\n        v-for=\"row in form.lines\"\n        :key=\"row\"\n      >\n        <div class=\"col-xl-4\" id=\"devismainblock\">\n          <label class=\"\">Description</label>\n          <input\n            class=\"form-control\"\n            v-model=\"row.productName\"\n            type=\"text\"\n            placeholder=\"Description\"\n          />\n        </div>\n        <div class=\"col\">\n          <label class=\"\">Date</label>\n          <input class=\"form-control\" v-model=\"row.date\" type=\"date\" />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Quantité</label>\n          <input\n            class=\"form-control calc-inp maclasse\"\n            v-model=\"row.quantity\"\n            @keydown=\"format\"\n            placeholder=\"Quantité\"\n            type=\"number\"\n            step=\"1.0\"\n          />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Unité</label>\n          <select class=\"form-control\" type=\"\" v-model=\"row.units\">\n            <option value=\"PIECE\">Piéce(s)</option>\n            <option value=\"HEURE\">Heures</option>\n            <option value=\"KM\">Km</option>\n            <option value=\"KG\">Kg</option>\n            <option value=\"M\">M</option>\n            <option value=\"LOT_PARC\">Lot Parc</option>\n            <option value=\"AM\">Am</option>\n          </select>\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Prix(€)</label>\n          <input\n            class=\"form-control calc-inp\"\n            type=\"number\"\n            placeholder=\"Prix\"\n            v-model=\"row.htPrice\"\n          />\n        </div>\n        <div class=\"col\">\n          <label class=\"\">TVA(%)</label>\n          <input\n            class=\"form-control calc-inp\"\n            type=\"number\"\n            v-model=\"row.tvaPercent\"\n            @keydown=\"format\"\n            placeholder=\"TVA(%)\"\n            step=\"1\"\n          />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Montant(€)</label>\n          <input\n            class=\"form-control\"\n            type=\"points\"\n            :value=\"\n              (row.finalPrice =\n                row.quantity *\n                row.htPrice *\n                (1 + row.tvaPercent / 100)).toFixed(0)\n            \"\n            placeholder=\"0.00\"\n            step=\"0.1\"\n            readonly=\"readonly\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <!-- row.quantity * row.htPrice * (1 + row.tvaPercent / 100) -->\n    <!-- Lines -->\n\n    <div class=\"mx-auto d-flex justify-content-between\">\n      <div>\n        <button\n          class=\"btn btn-light border mt-3\"\n          type=\"button\"\n          @click=\"addRow\"\n        >\n          Ajouter +\n        </button>\n      </div>\n\n      <div>\n        <button\n          v-if=\"form.lines.length > 1\"\n          @click=\"removeLast\"\n          class=\"btn btn-light border mt-3\"\n        >\n          Supprimer -\n        </button>\n      </div>\n    </div>\n\n    <div>\n      <label class=\"mt-3 me-2\">Total HT(€)</label>\n      <input\n        style=\"border: none\"\n        type=\"number\"\n        placeholder=\"0.00\"\n        readonly=\"readonly\"\n        :value=\"(form.totalHT = getHT.toFixed(0))\"\n      />\n    </div>\n\n    <div>\n      <label class=\"mt-3 me-2\">Total TVA(€)</label>\n      <input\n        style=\"border: none\"\n        type=\"number\"\n        placeholder=\"0.00\"\n        readonly=\"readonly\"\n        :value=\"(form.totalTVA = getTVAeuro.toFixed(0))\"\n      />\n    </div>\n\n    <div>\n      <label class=\"mt-3 me-2\">Total TTC</label>\n      <input\n        style=\"border: none\"\n        type=\"number\"\n        placeholder=\"0.00\"\n        readonly=\"readonly\"\n        :value=\"(form.totalTTC = getTotal.toFixed(0))\"\n      />\n    </div>\n  </div>\n\n  <div id=\"notify\" class=\"text-danger\">{{ err }}</div>\n\n  <div class=\"d-flex justify-content-center m-4\">\n    <button\n      class=\"btnHkos\"\n      @click=\"sendForm\"\n    >\n      Générer mon devis\n    </button>\n  </div>\n</template>\n\n<script>\nimport AddClientBlock from \"../AddClientBlock.vue\";\n\nclass lines {\n  productName = \"\";\n  date = \"\";\n  units = \"\";\n  quantity = \"\";\n  htPrice = \"\";\n  tvaPercent = \"\";\n  finalPrice = \"\";\n}\n\nexport default {\n  name: \"DevisBlockGenerateur\",\n  props: {\n    msg: String,\n  },\n\n  data() {\n    return {\n      status: false,\n      revele: false,\n      form: {\n        clientUuid: \"\",\n        dateReglement: \"\",\n        commentaires: \"\",\n        lines: [new lines()],\n        totalTTC: \"\",\n        totalHT: \"\",\n        totalTVA: \"\",\n        userUuid: \"7dc966c7-2a68-4a2d-b79e-407579f178c3\",\n      },\n      err: \"\",\n    };\n  },\n  methods: {\n    format(e) {\n      var key = e.key;\n\n      if (!/^\\d+/g.test(key) && key != 'Backspace' && key != 'Delete' && key != 'ArrowLeft' && key != 'ArrowRight') {\n        e.preventDefault();\n      }\n    },\n    addRow() {\n      this.form.lines.push(new lines());\n    },\n    async sendForm() {\n      let res = await fetch(\"https://hkos-back.herokuapp.com/devis/create\", {\n        method: \"post\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(this.form),\n      });\n\n      let data = await res.json();\n\n      if (data.message == \"Devis created\") {\n        this.$router.push(\"Devis\");\n      } else {\n        console.log(data);\n        this.err = data.error.message;\n      }\n    },\n\n\n    removeLast() {\n      this.form.lines.pop();\n    },\n\n    toggleModale: function (e) {\n      if (e) {\n        if (!e.target.closest(\".modale\") || e.target.id == \"close-btn\")\n          this.revele = false;\n      } else this.revele = false;\n    },\n  },\n  mounted() {\n   \n    this.$store.dispatch('getClients');\n  },\n  updated() {\n\n  },\n\n  computed: {\n    getTotal() {\n      let result = 0;\n      this.form.lines.forEach((elem) => {\n        result += elem.finalPrice;\n      });\n      return result;\n    },\n\n    getHT() {\n      let result = 0;\n      this.form.lines.forEach((elem) => {\n        result += elem.htPrice * elem.quantity;\n      });\n      return result;\n    },\n    getTVAeuro() {\n      let result = 0;\n      this.form.lines.forEach((elem) => {\n        result += elem.finalPrice - elem.htPrice * elem.quantity;\n      });\n      return result;\n    },\n\n    getClients() {\n      return this.$store.state.Clients;\n    },\n  },\n  components: {\n    AddClientBlock,\n  },\n};\n</script>\n\n<style scoped>\n* {\n  font-size: 14px;\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module"}