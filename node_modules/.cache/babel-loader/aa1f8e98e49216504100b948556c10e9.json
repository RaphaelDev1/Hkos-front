{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, createCommentVNode as _createCommentVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3b76e311\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"border-bottom\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"fw-normal text-center\",\n  style: {\n    \"font-size\": \"20px\"\n  }\n}, \"Devis\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"pb-2 mt-3\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"Client\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = {\n  class: \"input-group pb-3 border-bottom\"\n};\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = {\n  class: \"d-flex border-bottom pb-3 pt-3 row\"\n};\nconst _hoisted_7 = {\n  class: \"w-50 col-lg\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\",\n  for: \"inputDesctiption\"\n}, \"Commentaires\", -1\n/* HOISTED */\n));\n\nconst _hoisted_9 = {\n  class: \"w-50 col-lg\"\n};\nconst _hoisted_10 = {\n  class: \"pb-2\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\"\n}, \"Date limite de réglement \", -1\n/* HOISTED */\n));\n\nconst _hoisted_12 = {\n  class: \"table\"\n};\nconst _hoisted_13 = {\n  class: \"col-xl-4\",\n  id: \"devismainblock\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Description\", -1\n/* HOISTED */\n));\n\nconst _hoisted_15 = [\"onUpdate:modelValue\"];\nconst _hoisted_16 = {\n  class: \"col\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Date\", -1\n/* HOISTED */\n));\n\nconst _hoisted_18 = [\"onUpdate:modelValue\"];\nconst _hoisted_19 = {\n  class: \"col\"\n};\n\nconst _hoisted_20 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Quantité\", -1\n/* HOISTED */\n));\n\nconst _hoisted_21 = [\"onUpdate:modelValue\"];\nconst _hoisted_22 = {\n  class: \"col\"\n};\n\nconst _hoisted_23 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Unité\", -1\n/* HOISTED */\n));\n\nconst _hoisted_24 = [\"onUpdate:modelValue\"];\n\nconst _hoisted_25 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"PIECE\\\" data-v-3b76e311>Piéce(s)</option><option value=\\\"HEURE\\\" data-v-3b76e311>Heures</option><option value=\\\"KM\\\" data-v-3b76e311>Km</option><option value=\\\"KG\\\" data-v-3b76e311>Kg</option><option value=\\\"M\\\" data-v-3b76e311>M</option><option value=\\\"LOT_PARC\\\" data-v-3b76e311>Lot Parc</option><option value=\\\"AM\\\" data-v-3b76e311>Am</option>\", 7);\n\nconst _hoisted_32 = [_hoisted_25];\nconst _hoisted_33 = {\n  class: \"col\"\n};\n\nconst _hoisted_34 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Prix(€)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_35 = [\"onUpdate:modelValue\"];\nconst _hoisted_36 = {\n  class: \"col\"\n};\n\nconst _hoisted_37 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"TVA(%)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_38 = [\"onUpdate:modelValue\"];\nconst _hoisted_39 = {\n  class: \"col\"\n};\n\nconst _hoisted_40 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"\"\n}, \"Montant(€)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_41 = [\"value\"];\nconst _hoisted_42 = {\n  class: \"mx-auto d-flex justify-content-between\"\n};\n\nconst _hoisted_43 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"mt-3 me-2\"\n}, \"Total HT(€)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_44 = [\"value\"];\n\nconst _hoisted_45 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"mt-3 me-2\"\n}, \"Total TVA(€)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_46 = [\"value\"];\n\nconst _hoisted_47 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"mt-3 me-2\"\n}, \"Total TTC\", -1\n/* HOISTED */\n));\n\nconst _hoisted_48 = [\"value\"];\nconst _hoisted_49 = {\n  id: \"notify\",\n  class: \"text-danger\"\n};\nconst _hoisted_50 = {\n  class: \"d-flex justify-content-center m-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AddClientBlock = _resolveComponent(\"AddClientBlock\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_AddClientBlock, {\n    onAccept: _ctx.getForm,\n    revele: _ctx.revele,\n    toggleModale: $options.toggleModale\n  }, null, 8\n  /* PROPS */\n  , [\"onAccept\", \"revele\", \"toggleModale\"]), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"button\", {\n    class: \"btn btn-danger my-4\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.go(-1))\n  }, \"Retour\"), _hoisted_2, _hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n    class: \"btn-hkos\",\n    onClick: _cache[1] || (_cache[1] = $event => _ctx.$store.dispatch('toggleModal', {\n      status: true,\n      event: $event.target\n    })),\n    id: \"open-modal\"\n  }, \" Nouveau client + \"), _withDirectives(_createElementVNode(\"select\", {\n    class: \"form-control\",\n    style: {\n      \"font-weight\": \"300\"\n    },\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.$store.state.EditDevis.clientUuid = $event),\n    type: \"\"\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.getClients, client => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      value: client.uuid,\n      key: client\n    }, _toDisplayString(client.nom) + \" \" + _toDisplayString(client.prenoms), 9\n    /* TEXT, PROPS */\n    , _hoisted_5);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))], 512\n  /* NEED_PATCH */\n  ), [[_vModelSelect, _ctx.$store.state.EditDevis.clientUuid]])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", null, [_hoisted_8, _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"form-control\",\n    rows: \"4\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.$store.state.EditDevis.commentaires = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.$store.state.EditDevis.commentaires]])])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _withDirectives(_createElementVNode(\"input\", {\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => _ctx.$store.state.EditDevis.dateReglement = $event),\n    type: \"date\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.$store.state.EditDevis.dateReglement]])])])]), _createElementVNode(\"div\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.$store.state.EditDevis.lines, row => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"t-row row mt-2\",\n      id: \"devismainblock\",\n      key: row\n    }, [_createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _withDirectives(_createElementVNode(\"input\", {\n      class: \"form-control\",\n      \"onUpdate:modelValue\": $event => row.productName = $event,\n      type: \"text\",\n      placeholder: \"Description\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_15), [[_vModelText, row.productName]])]), _createElementVNode(\"div\", _hoisted_16, [_hoisted_17, _withDirectives(_createElementVNode(\"input\", {\n      class: \"form-control\",\n      \"onUpdate:modelValue\": $event => row.date = $event,\n      type: \"date\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_18), [[_vModelText, row.date]])]), _createElementVNode(\"div\", _hoisted_19, [_hoisted_20, _withDirectives(_createElementVNode(\"input\", {\n      id: \"qty\",\n      class: \"form-control calc-inp maclasse\",\n      placeholder: \"Quantité\",\n      \"onUpdate:modelValue\": $event => row.quantity = $event,\n      onKeydown: _cache[5] || (_cache[5] = (...args) => $options.format && $options.format(...args)),\n      type: \"number\",\n      step: \"1.0\"\n    }, null, 40\n    /* PROPS, HYDRATE_EVENTS */\n    , _hoisted_21), [[_vModelText, row.quantity]])]), _createElementVNode(\"div\", _hoisted_22, [_hoisted_23, _withDirectives(_createElementVNode(\"select\", {\n      id: \"unit\",\n      class: \"form-control\",\n      type: \"\",\n      \"onUpdate:modelValue\": $event => row.units = $event\n    }, _hoisted_32, 8\n    /* PROPS */\n    , _hoisted_24), [[_vModelSelect, row.units]])]), _createElementVNode(\"div\", _hoisted_33, [_hoisted_34, _withDirectives(_createElementVNode(\"input\", {\n      id: \"price\",\n      class: \"form-control calc-inp\",\n      type: \"number\",\n      placeholder: \"Prix\",\n      \"onUpdate:modelValue\": $event => row.htPrice = $event\n    }, null, 8\n    /* PROPS */\n    , _hoisted_35), [[_vModelText, row.htPrice]])]), _createElementVNode(\"div\", _hoisted_36, [_hoisted_37, _withDirectives(_createElementVNode(\"input\", {\n      id: \"tax\",\n      class: \"form-control calc-inp\",\n      type: \"number\",\n      \"onUpdate:modelValue\": $event => row.tvaPercent = $event,\n      onKeydown: _cache[6] || (_cache[6] = (...args) => $options.format && $options.format(...args)),\n      placeholder: \"TVA(%)\",\n      step: \"1\"\n    }, null, 40\n    /* PROPS, HYDRATE_EVENTS */\n    , _hoisted_38), [[_vModelText, row.tvaPercent]])]), _createElementVNode(\"div\", _hoisted_39, [_hoisted_40, _createElementVNode(\"input\", {\n      class: \"form-control\",\n      type: \"points\",\n      value: (row.finalPrice = row.quantity * row.htPrice * (1 + row.tvaPercent / 100)).toFixed(0),\n      placeholder: \"0.00\",\n      step: \"0.1\",\n      readonly: \"readonly\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_41)])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), _createCommentVNode(\" Lines \"), _createElementVNode(\"div\", _hoisted_42, [_createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"btn btn-light border mt-3\",\n    id: \"addbutton\",\n    type: \"button\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.addRow && $options.addRow(...args))\n  }, \" Ajouter + \")]), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.removeLast && $options.removeLast(...args)),\n    class: \"btn btn-light border mt-3\"\n  }, \" Supprimer - \")])]), _createElementVNode(\"div\", null, [_hoisted_43, _createElementVNode(\"input\", {\n    style: {\n      \"border\": \"none\"\n    },\n    type: \"number\",\n    placeholder: \"0.00\",\n    readonly: \"readonly\",\n    value: $options.getTotal().totalHT.toFixed(0)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_44)]), _createElementVNode(\"div\", null, [_hoisted_45, _createElementVNode(\"input\", {\n    style: {\n      \"border\": \"none\"\n    },\n    type: \"number\",\n    placeholder: \"0.00\",\n    readonly: \"readonly\",\n    value: $options.getTotal().totalTVA.toFixed(0)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_46)]), _createElementVNode(\"div\", null, [_hoisted_47, _createElementVNode(\"input\", {\n    id: \"amount\",\n    style: {\n      \"border\": \"none\"\n    },\n    type: \"number\",\n    placeholder: \"0.00\",\n    readonly: \"readonly\",\n    value: $options.getTotal().totalTTC.toFixed(0)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_48)])]), _createElementVNode(\"div\", _hoisted_49, _toDisplayString($data.err), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", _hoisted_50, [_createElementVNode(\"button\", {\n    class: \"btn btn2 btn-danger\",\n    style: {\n      \"padding\": \"6px 18px\",\n      \"margin\": \"8px\"\n    },\n    onClick: _cache[9] || (_cache[9] = $event => _ctx.$router.go(-1))\n  }, \" Annuler \"), _createElementVNode(\"button\", {\n    class: \"btn-hkos\",\n    onClick: _cache[10] || (_cache[10] = (...args) => $options.sendForm && $options.sendForm(...args))\n  }, \"Modifier mon devis\")])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","style","for","id","_hoisted_25","_createVNode","_component_AddClientBlock","onAccept","_ctx","revele","toggleModale","$options","onClick","go","_hoisted_2","_hoisted_3","dispatch","status","event","$event","target","state","EditDevis","clientUuid","type","_createElementBlock","_Fragment","_renderList","client","value","uuid","key","nom","_toDisplayString","prenoms","_hoisted_5","_hoisted_8","rows","commentaires","_hoisted_11","dateReglement","lines","row","_hoisted_14","productName","placeholder","_hoisted_17","date","_hoisted_20","quantity","onKeydown","step","_hoisted_23","units","_hoisted_34","htPrice","_hoisted_37","tvaPercent","_hoisted_40","finalPrice","toFixed","readonly","_createCommentVNode","_hoisted_43","totalHT","_hoisted_45","totalTVA","_hoisted_47","totalTTC","$data"],"sourceRoot":"","sources":["/Users/feyraf/Desktop/projet Hkos/hkos-project-front/src/components/user/Devis/EditDevis.vue"],"sourcesContent":["<template>\n  <AddClientBlock\n    @accept=\"getForm\"\n    v-bind:revele=\"revele\"\n    v-bind:toggleModale=\"toggleModale\"\n  />\n\n  <div class=\"container\">\n    <button class=\"btn btn-danger my-4\" @click=\"$router.go(-1)\">Retour</button>\n    <div class=\"border-bottom\">\n      <span class=\"fw-normal text-center\" style=\"font-size: 20px\">Devis</span>\n    </div>\n\n    <div class=\"pb-2 mt-3\"><span>Client</span></div>\n\n    <div class=\"input-group pb-3 border-bottom\">\n      <button\n        class=\"btn-hkos\"\n        v-on:click=\"\n          $store.dispatch('toggleModal', { status: true, event: $event.target })\n        \"\n        id=\"open-modal\"\n      >\n        Nouveau client +\n      </button>\n      <select\n        class=\"form-control\"\n        style=\"font-weight: 300\"\n        v-model=\"$store.state.EditDevis.clientUuid\"\n        type=\"\"\n      >\n        <option :value=\"client.uuid\" v-for=\"client in getClients\" :key=\"client\">\n          {{ client.nom }} {{ client.prenoms }}\n        </option>\n      </select>\n    </div>\n\n    <div class=\"d-flex border-bottom pb-3 pt-3 row\">\n      <div class=\"w-50 col-lg\">\n        <div>\n          <label class=\"form-label\" for=\"inputDesctiption\">Commentaires</label>\n          <textarea\n            class=\"form-control\"\n            rows=\"4\"\n            v-model=\"$store.state.EditDevis.commentaires\"\n          ></textarea>\n        </div>\n      </div>\n      <div class=\"w-50 col-lg\">\n        <div class=\"pb-2\">\n          <label class=\"form-label\">Date limite de réglement </label>\n          <input\n            class=\"form-control\"\n            v-model=\"$store.state.EditDevis.dateReglement\"\n            type=\"date\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <div class=\"table\">\n      <div\n        class=\"t-row row mt-2\"\n        id=\"devismainblock\"\n        v-for=\"row in $store.state.EditDevis.lines\"\n        :key=\"row\"\n      >\n        <div class=\"col-xl-4\" id=\"devismainblock\">\n          <label class=\"\">Description</label>\n          <input\n            class=\"form-control\"\n            v-model=\"row.productName\"\n            type=\"text\"\n            placeholder=\"Description\"\n          />\n        </div>\n        <div class=\"col\">\n          <label class=\"\">Date</label>\n          <input class=\"form-control\" v-model=\"row.date\" type=\"date\" />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Quantité</label>\n          <input\n            id=\"qty\"\n            class=\"form-control calc-inp maclasse\"\n            placeholder=\"Quantité\"\n            v-model=\"row.quantity\"\n            @keydown=\"format\"\n            type=\"number\"\n            step=\"1.0\"\n          />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Unité</label>\n          <select id=\"unit\" class=\"form-control\" type=\"\" v-model=\"row.units\">\n            <option value=\"PIECE\">Piéce(s)</option>\n            <option value=\"HEURE\">Heures</option>\n            <option value=\"KM\">Km</option>\n            <option value=\"KG\">Kg</option>\n            <option value=\"M\">M</option>\n            <option value=\"LOT_PARC\">Lot Parc</option>\n            <option value=\"AM\">Am</option>\n          </select>\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Prix(€)</label>\n          <input\n            id=\"price\"\n            class=\"form-control calc-inp\"\n            type=\"number\"\n            placeholder=\"Prix\"\n            v-model=\"row.htPrice\"\n          />\n        </div>\n        <div class=\"col\">\n          <label class=\"\">TVA(%)</label>\n          <input\n            id=\"tax\"\n            class=\"form-control calc-inp\"\n            type=\"number\"\n            v-model=\"row.tvaPercent\"\n            @keydown=\"format\"\n            placeholder=\"TVA(%)\"\n            step=\"1\"\n          />\n        </div>\n\n        <div class=\"col\">\n          <label class=\"\">Montant(€)</label>\n          <input\n            class=\"form-control\"\n            type=\"points\"\n            :value=\"\n              (row.finalPrice =\n                row.quantity *\n                row.htPrice *\n                (1 + row.tvaPercent / 100)).toFixed(0)\n            \"\n            placeholder=\"0.00\"\n            step=\"0.1\"\n            readonly=\"readonly\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <!-- Lines -->\n\n    <div class=\"mx-auto d-flex justify-content-between\">\n      <div>\n        <button\n          class=\"btn btn-light border mt-3\"\n          id=\"addbutton\"\n          type=\"button\"\n          @click=\"addRow\"\n        >\n          Ajouter +\n        </button>\n      </div>\n\n      <div>\n        <button @click=\"removeLast\" class=\"btn btn-light border mt-3\">\n          Supprimer -\n        </button>\n      </div>\n    </div>\n\n    <div>\n      <label class=\"mt-3 me-2\">Total HT(€)</label>\n      <input\n        style=\"border: none\"\n        type=\"number\"\n        placeholder=\"0.00\"\n        readonly=\"readonly\"\n        :value=\"getTotal().totalHT.toFixed(0)\"\n      />\n    </div>\n\n    <div>\n      <label class=\"mt-3 me-2\">Total TVA(€)</label>\n      <input\n        style=\"border: none\"\n        type=\"number\"\n        placeholder=\"0.00\"\n        readonly=\"readonly\"\n        :value=\"getTotal().totalTVA.toFixed(0)\"\n      />\n    </div>\n\n    <div>\n      <label class=\"mt-3 me-2\">Total TTC</label>\n      <input\n        id=\"amount\"\n        style=\"border: none\"\n        type=\"number\"\n        placeholder=\"0.00\"\n        readonly=\"readonly\"\n        :value=\"getTotal().totalTTC.toFixed(0)\"\n      />\n    </div>\n  </div>\n\n  <div id=\"notify\" class=\"text-danger\">{{ err }}</div>\n\n  <div class=\"d-flex justify-content-center m-4\">\n    <button\n      class=\"btn btn2 btn-danger\"\n      style=\"padding: 6px 18px; margin: 8px\"\n      @click=\"$router.go(-1)\"\n    >\n      Annuler\n    </button>\n    <button class=\"btn-hkos\" @click=\"sendForm\">Modifier mon devis</button>\n  </div>\n</template>\n\n<script>\nimport AddClientBlock from \"../AddClientBlock.vue\";\n\nclass lines {\n  productName = \"\";\n  date = \"\";\n  units = \"\";\n  quantity = \"\";\n  htPrice = \"\";\n  tvaPercent = \"\";\n  finalPrice = \"\";\n}\n\nexport default {\n  name: \"EditDevis\",\n  props: {\n    msg: String,\n  },\n\n  data() {\n    return {\n      err: \"\",\n    };\n  },\n  methods: {\n    format(e) {\n      var key = e.key;\n      if (\n        !/^\\d+/g.test(key) &&\n        key != \"Backspace\" &&\n        key != \"Delete\" &&\n        key != \"ArrowLeft\" &&\n        key != \"ArrowRight\"\n      ) {\n        e.preventDefault();\n      }\n    },\n    addRow() {\n      this.$store.state.EditDevis.lines.push(new lines());\n    },\n    async sendForm() {\n      let res = await fetch(`${process.env.VUE_APP_ROOT_API}/devis/update/`, {\n        method: \"post\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(this.$store.state.EditDevis),\n      });\n\n      let data = await res.json();\n      if (data.message == \"Devis Updated\") {\n        this.$router.push(\"/Devis\");\n      } else {\n        this.err = data.error.message;\n      }\n    },\n\n    removeLast() {\n      if (this.$store.state.EditDevis.lines.length > 1) {\n        this.$store.state.EditDevis.lines.pop();\n      }\n    },\n\n    toggleModale: function (e) {\n      if (e) {\n        if (!e.target.closest(\".modale\") || e.target.id == \"close-btn\")\n          this.revele = false;\n      } else this.revele = false;\n    },\n\n    getTotal() {\n      const Result = {\n        totalHT: 0,\n        totalTTC: 0,\n        totalTVA: 0,\n      };\n      if (this.$store.state.EditDevis.lines) {\n        this.$store.state.EditDevis.lines.forEach((elem) => {\n          Result.totalHT += elem.htPrice * elem.quantity;\n          Result.totalTTC += elem.finalPrice;\n          Result.totalTVA += elem.finalPrice - elem.htPrice * elem.quantity;\n        });\n      }\n      this.$store.state.EditDevis.totalHT = Result.totalHT.toFixed();\n      this.$store.state.EditDevis.totalTTC = Result.totalTTC.toFixed();\n      this.$store.state.EditDevis.totalTVA = Result.totalTVA.toFixed();\n\n      return Result;\n    },\n\n    getDate() {\n      let Result = \"\";\n      if (this.$store.state.EditDevis.dateReglement) {\n        Result = this.$store.state.EditDevis.dateReglement.substring(\n          0,\n          this.$store.state.EditDevis.dateReglement.length - 14\n        );\n      }\n      this.$store.state.EditDevis.totalTVA == Result;\n      return Result;\n    },\n  },\n  mounted() {\n    this.$store.dispatch(\"getDevis\", { uuid: this.$route.params.uuid });\n    this.$store.dispatch(\"getClients\");\n  },\n  updated() {},\n\n  computed: {\n    getClients() {\n      return this.$store.state.Clients;\n    },\n  },\n  components: {\n    AddClientBlock,\n  },\n};\n</script>\n\n<style scoped>\n* {\n  font-size: 14px;\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module"}